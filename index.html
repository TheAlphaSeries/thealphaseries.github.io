<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Friday Brief</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Noto+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400&family=Share+Tech+Mono&family=VT323&display=swap" rel="stylesheet">
<style>
:root {
  /* ‚îÄ‚îÄ Polymath Brand ‚îÄ‚îÄ */
  --pm-purple:  #5138ee;
  --pm-purple2: #6b52f5;   /* slightly lighter for hover */
  --pm-purple3: #9080ff;   /* muted purple for secondary text */
  --pm-purple4: #c4b8ff;   /* pale purple for readable body text on dark */
  --pm-bg:      #0a071b;
  --pm-lime:    #d1ee78;   /* accent only ‚Äî never large text */
  --pm-lime2:   #e8f8a8;   /* lighter lime for very small accent labels */

  /* Layered darks derived from bg ‚Äî subtle, not grey */
  --pm-slab:    #0d0a20;
  --pm-panel:   #110e28;
  --pm-panel2:  #181430;
  --pm-rim:     #201a40;
  --pm-rim2:    #2c2558;

  --mono:    'Share Tech Mono', monospace;
  --serif:   'Noto Serif', serif;
  --display: 'Bebas Neue', sans-serif;

  /* ‚îÄ‚îÄ Theme semantic tokens (default = Polymath brand) ‚îÄ‚îÄ
     Readability rules:
     ¬∑ Large text (headings, body copy)     ‚Üí --t-text  (#f0eeff, near-white)
     ¬∑ Secondary / metadata text            ‚Üí --t-text2 (pale purple, still legible)
     ¬∑ Muted / placeholder text             ‚Üí --t-text3 (dim purple, for decorative only)
     ¬∑ Lime (#d1ee78) = accents ONLY:
       bullets, pulse dot, tiny labels, sep bar flash
     ¬∑ Purple (#5138ee) = section stripes, button backgrounds, panel tints
  */
  --t-bg:       var(--pm-bg);
  --t-panel:    var(--pm-panel);
  --t-panel2:   var(--pm-panel2);
  --t-slab:     var(--pm-slab);
  --t-rim:      var(--pm-rim);
  --t-rim2:     var(--pm-rim2);
  --t-accent1:  var(--pm-purple);    /* section stripes, button bg, emphasis */
  --t-accent2:  var(--pm-purple2);   /* hover states, secondary emphasis */
  --t-accent3:  var(--pm-lime);      /* ACCENT ONLY ‚Äî bullets, pulse dot, small glows */
  --t-gold:     var(--pm-purple4);   /* section header text ‚Äî pale purple, readable */
  --t-gold2:    #f0eeff;             /* quote / large display text ‚Äî near white */
  --t-text:     #f0eeff;             /* primary body text ‚Äî clean near-white */
  --t-text2:    var(--pm-purple4);   /* secondary text ‚Äî pale purple */
  --t-text3:    #4a4080;             /* muted / decorative text */
  --t-glow1:    rgba(81,56,238,0.22);
  --t-glow2:    rgba(209,238,120,0.04);
  --t-sep:      linear-gradient(90deg, transparent, var(--pm-purple), var(--pm-lime), var(--pm-purple2), transparent);
  --t-ticker:   var(--pm-purple);
  --t-name-gradient: linear-gradient(160deg, #ffffff 0%, #f0eeff 30%, var(--pm-purple4) 65%, var(--pm-purple) 100%);
}

/* ‚ïê‚ïê THEME: CRIMSON TIDE ‚ïê‚ïê
   Deep red, blood orange, pale gold ‚Äî brutal and precise */
[data-theme="crimson"] {
  --t-bg:      #060203;
  --t-panel:   #140408;
  --t-panel2:  #1e060c;
  --t-slab:    #0d0205;
  --t-rim:     #3a0a14;
  --t-rim2:    #520e1c;
  --t-accent1: #e0143c;
  --t-accent2: #ff6b35;
  --t-accent3: #ffcc00;
  --t-gold:    #ffcc00;
  --t-gold2:   #fff0a0;
  --t-text:    #f0d8dc;
  --t-text2:   #c07080;
  --t-text3:   #6a2030;
  --t-glow1:   rgba(224,20,60,0.25);
  --t-glow2:   rgba(255,107,53,0.12);
  --t-sep:     linear-gradient(90deg, #8b0000, #e0143c, #ff6b35, #ffcc00, #e0143c, #8b0000);
  --t-ticker:  #e0143c;
  --t-name-gradient: linear-gradient(160deg, #fff0a0 0%, #ffcc00 30%, #ff6b35 60%, #e0143c 100%);
}

/* ‚ïê‚ïê THEME: CHRIS ‚Äî VAULT-TEC TERMINAL ‚ïê‚ïê
   Phosphor green on pitch black ‚Äî Fallout terminal experience
   Font: VT323 ¬∑ Scanlines ¬∑ Flicker ¬∑ Typewriter reveal */
[data-theme="void"] {
  --t-bg:      #000000;
  --t-panel:   #050f05;
  --t-panel2:  #081508;
  --t-slab:    #030a03;
  --t-rim:     #0e280e;
  --t-rim2:    #163816;
  --t-accent1: #20c020;
  --t-accent2: #18a018;
  --t-accent3: #4eff4e;
  --t-gold:    #20c020;
  --t-gold2:   #a0ffa0;
  --t-text:    #e8ffe8;   /* body text ‚Äî bright near-white green, easy to read */
  --t-text2:   #4eff4e;   /* secondary text ‚Äî hot phosphor */
  --t-text3:   #1a6020;   /* muted / decorative */
  --t-glow1:   rgba(32,192,32,0.20);
  --t-glow2:   rgba(78,255,78,0.08);
  --t-sep:     linear-gradient(90deg, transparent, #20c020, #4eff4e, #20c020, transparent);
  --t-ticker:  #20c020;
  --t-name-gradient: linear-gradient(160deg, #ffffff 0%, #a0ffa0 30%, #4eff4e 60%, #20c020 100%);

  /* Terminal font overrides */
  --mono:    'VT323', monospace;
  --serif:   'VT323', monospace;
  --display: 'VT323', monospace;
}

/* ‚îÄ‚îÄ Full-page terminal atmosphere when Chris theme is active ‚îÄ‚îÄ */
[data-theme="void"] body {
  font-size: 17px;
  letter-spacing: 0.04em;
}

/* Scanline overlay ‚Äî the horizontal line pattern across everything */
[data-theme="void"] body::after {
  content: '';
  position: fixed; inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.35) 2px,
    rgba(0,0,0,0.35) 4px
  );
  pointer-events: none;
  z-index: 9997;
  animation: scanline-drift 12s linear infinite;
}
@keyframes scanline-drift {
  0%   { background-position: 0 0; }
  100% { background-position: 0 100px; }
}

/* Moving scan beam ‚Äî the bright line that sweeps down */
[data-theme="void"] body::before {
  content: '';
  position: fixed; left: 0; right: 0; top: -10%;
  height: 20%;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(32,192,32,0.03) 40%,
    rgba(32,192,32,0.07) 50%,
    rgba(32,192,32,0.03) 60%,
    transparent 100%
  );
  pointer-events: none;
  z-index: 9996;
  animation: scan-beam 8s linear infinite;
}
@keyframes scan-beam {
  0%   { top: -20%; }
  100% { top: 110%; }
}

/* Phosphor CRT flicker */
[data-theme="void"] .masthead,
[data-theme="void"] .page,
[data-theme="void"] #view-read {
  animation: crt-flicker 0.15s infinite;
}
@keyframes crt-flicker {
  0%   { opacity: 1; }
  92%  { opacity: 1; }
  93%  { opacity: 0.94; }
  94%  { opacity: 1; }
  96%  { opacity: 0.97; }
  100% { opacity: 1; }
}

/* CRT screen curvature vignette */
[data-theme="void"] .page::before {
  content: '';
  position: fixed; inset: 0;
  background: radial-gradient(ellipse at center,
    transparent 60%,
    rgba(0,0,0,0.55) 100%
  );
  pointer-events: none;
  z-index: 9995;
}

/* Terminal cursor blink on headers */
[data-theme="void"] .div-name::after,
[data-theme="void"] .paper-name-sub::after {
  content: '‚ñà';
  animation: cur-blink 1.1s step-end infinite;
  margin-left: 4px;
  font-size: 0.7em;
  opacity: 0.8;
}
@keyframes cur-blink {
  0%,100% { opacity: 0.8; }
  50%     { opacity: 0; }
}

/* Phosphor glow ‚Äî ONLY on large display text and accents, not body copy */
[data-theme="void"] .paper-name,
[data-theme="void"] .paper-name-sub,
[data-theme="void"] .div-name,
[data-theme="void"] .issue-week,
[data-theme="void"] .issue-glyph,
[data-theme="void"] .cs-hdr,
[data-theme="void"] .cell-label,
[data-theme="void"] .shout-who,
[data-theme="void"] .mode-tab.active,
[data-theme="void"] .spice-btn,
[data-theme="void"] .tx-btn {
  text-shadow: 0 0 10px rgba(32,192,32,0.9), 0 0 20px rgba(32,192,32,0.4);
}

/* Body text ‚Äî NO glow, just bright and clean */
[data-theme="void"] .row-text,
[data-theme="void"] .blocked-text,
[data-theme="void"] .shout-what,
[data-theme="void"] .q-text,
[data-theme="void"] .issue-pulse,
[data-theme="void"] .quote-meaning,
[data-theme="void"] .arc-prev {
  text-shadow: none;
  color: #e8ffe8;
  font-size: 1.05em;
  line-height: 1.7;
}

/* Terminal-style borders ‚Äî use dashes instead of solid lines */
[data-theme="void"] .div-cell,
[data-theme="void"] .shout-card,
[data-theme="void"] .q-cell,
[data-theme="void"] .issue-hero,
[data-theme="void"] .dune-trigger-bar,
[data-theme="void"] .quote-display,
[data-theme="void"] .mode-bar {
  border-style: dashed;
  border-color: #20c020;
}

/* Blocked pills get a terminal WARNING style */
[data-theme="void"] .blocked-pill {
  border-style: dashed;
  border-color: #4eff4e;
  background: rgba(78,255,78,0.06);
}
[data-theme="void"] .blocked-pill::before {
  content: '> WARNING: ';
  color: #4eff4e;
  font-family: 'VT323', monospace;
  letter-spacing: 0.1em;
}

/* Ticker gets all-caps terminal style */
[data-theme="void"] .ticker {
  letter-spacing: 0.3em;
  font-family: 'VT323', monospace;
  font-size: 1.05rem;
  background: #20c020;
  color: #000;
  text-shadow: none;
}

/* Section stripe ‚Äî bright phosphor bar */
[data-theme="void"] .div-stripe {
  background: #20c020 !important;
  box-shadow: 0 0 16px #20c020, 0 0 32px rgba(32,192,32,0.5) !important;
  width: 3px;
}

/* Masthead issue glyph ‚Äî big glowing number */
[data-theme="void"] .issue-glyph {
  color: transparent;
  -webkit-text-stroke: 1px rgba(32,192,32,0.25);
  text-shadow: none;
}

/* Buttons */
[data-theme="void"] .spice-btn,
[data-theme="void"] .ghost-btn,
[data-theme="void"] .mode-tab,
[data-theme="void"] .add-btn {
  font-family: 'VT323', monospace;
  letter-spacing: 0.15em;
  clip-path: none;
  border-style: dashed;
}
[data-theme="void"] .mode-tab.active {
  background: #20c020;
  color: #000;
  text-shadow: none;
}

/* Typewriter reveal animation for content blocks */
@keyframes terminal-type-in {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}
[data-theme="void"] .div-header,
[data-theme="void"] .div-grid,
[data-theme="void"] .shouts-grid,
[data-theme="void"] .q-grid,
[data-theme="void"] .issue-hero,
[data-theme="void"] .dune-trigger-bar {
  animation: terminal-type-in 0.4s ease both;
}
[data-theme="void"] .div-header:nth-child(1)  { animation-delay: 0.1s; }
[data-theme="void"] .div-header:nth-child(2)  { animation-delay: 0.15s; }
[data-theme="void"] .div-grid:nth-child(2)    { animation-delay: 0.2s; }
[data-theme="void"] .div-grid:nth-child(4)    { animation-delay: 0.35s; }
[data-theme="void"] .div-grid:nth-child(6)    { animation-delay: 0.5s; }
[data-theme="void"] .div-grid:nth-child(8)    { animation-delay: 0.65s; }
[data-theme="void"] .shouts-grid             { animation-delay: 0.8s; }
[data-theme="void"] .q-grid                  { animation-delay: 0.95s; }


/* ‚ïê‚ïê THEME: DESERT STORM ‚ïê‚ïê
   Full sand and spice ‚Äî warm, ancient, sovereign */
[data-theme="desert"] {
  --t-bg:      #080501;
  --t-panel:   #120d04;
  --t-panel2:  #1c1508;
  --t-slab:    #0e0a03;
  --t-rim:     #3a2808;
  --t-rim2:    #503810;
  --t-accent1: #e8a020;
  --t-accent2: #d46010;
  --t-accent3: #f5c842;
  --t-gold:    #f5c842;
  --t-gold2:   #fde898;
  --t-text:    #f0e8d0;
  --t-text2:   #b08848;
  --t-text3:   #604820;
  --t-glow1:   rgba(232,160,32,0.2);
  --t-glow2:   rgba(212,96,16,0.12);
  --t-sep:     linear-gradient(90deg, #4a2800, #e8a020, #f5c842, #d46010, #e8a020, #4a2800);
  --t-ticker:  #d46010;
  --t-name-gradient: linear-gradient(160deg, #fde898 0%, #f5c842 25%, #e8a020 55%, #d46010 100%);
}

/* ‚ïê‚ïê THEME: POISON GARDEN ‚ïê‚ïê
   Toxic green, acid yellow, deep teal ‚Äî alive and dangerous */
[data-theme="poison"] {
  --t-bg:      #010804;
  --t-panel:   #040f08;
  --t-panel2:  #07160c;
  --t-slab:    #030c06;
  --t-rim:     #0a2814;
  --t-rim2:    #103820;
  --t-accent1: #00e060;
  --t-accent2: #c8ff00;
  --t-accent3: #00ffc8;
  --t-gold:    #c8ff00;
  --t-gold2:   #eeffaa;
  --t-text:    #d0f0d8;
  --t-text2:   #50a068;
  --t-text3:   #204030;
  --t-glow1:   rgba(0,224,96,0.2);
  --t-glow2:   rgba(200,255,0,0.08);
  --t-sep:     linear-gradient(90deg, #003820, #00e060, #c8ff00, #00ffc8, #00e060, #003820);
  --t-ticker:  #00e060;
  --t-name-gradient: linear-gradient(160deg, #eeffaa 0%, #c8ff00 30%, #00e060 60%, #00ffc8 100%);
}

/* ‚ïê‚ïê THEME: IRON CATHEDRAL ‚ïê‚ïê
   Steel silver, rust red, cold white ‚Äî industrial and unforgiving */
[data-theme="iron"] {
  --t-bg:      #050505;
  --t-panel:   #0e0e0e;
  --t-panel2:  #161616;
  --t-slab:    #0a0a0a;
  --t-rim:     #282828;
  --t-rim2:    #383838;
  --t-accent1: #c0c0c0;
  --t-accent2: #cc4400;
  --t-accent3: #ffffff;
  --t-gold:    #e0e0e0;
  --t-gold2:   #f8f8f8;
  --t-text:    #e8e8e8;
  --t-text2:   #888888;
  --t-text3:   #444444;
  --t-glow1:   rgba(192,192,192,0.12);
  --t-glow2:   rgba(204,68,0,0.1);
  --t-sep:     linear-gradient(90deg, #282828, #c0c0c0, #ffffff, #cc4400, #c0c0c0, #282828);
  --t-ticker:  #cc4400;
  --t-name-gradient: linear-gradient(160deg, #ffffff 0%, #e0e0e0 30%, #c0c0c0 60%, #cc4400 100%);
}

/* ‚ïê‚ïê THEME: DEEP VIOLET ‚ïê‚ïê
   Ultraviolet, ghost white, electric magenta ‚Äî haunted and precise */
[data-theme="violet"] {
  --t-bg:      #04020a;
  --t-panel:   #0a0618;
  --t-panel2:  #120c24;
  --t-slab:    #070412;
  --t-rim:     #200840;
  --t-rim2:    #2e1058;
  --t-accent1: #c040ff;
  --t-accent2: #ff40c0;
  --t-accent3: #e0c0ff;
  --t-gold:    #e080ff;
  --t-gold2:   #f8e8ff;
  --t-text:    #eee0ff;
  --t-text2:   #9060c0;
  --t-text3:   #4a2880;
  --t-glow1:   rgba(192,64,255,0.25);
  --t-glow2:   rgba(255,64,192,0.12);
  --t-sep:     linear-gradient(90deg, #200840, #c040ff, #ff40c0, #e0c0ff, #c040ff, #200840);
  --t-ticker:  #c040ff;
  --t-name-gradient: linear-gradient(160deg, #f8e8ff 0%, #e080ff 25%, #c040ff 55%, #ff40c0 100%);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  background: var(--t-bg);
  color: var(--t-text);
  font-family: var(--serif);
  font-size: 17px;
  line-height: 1.7;
  min-height: 100vh;
  overflow-x: hidden;
  transition: background 0.5s ease, color 0.5s ease;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 120% 50% at 50% -5%, var(--t-glow1) 0%, transparent 55%),
    radial-gradient(ellipse 50% 60% at 100% 100%, var(--t-glow2) 0%, transparent 50%),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='56' height='100'%3E%3Cpath d='M28 0 L56 16 L56 50 L28 66 L0 50 L0 16Z' fill='none' stroke='rgba(106,15,212,0.06)' stroke-width='0.5'/%3E%3Cpath d='M28 34 L56 50 L56 84 L28 100 L0 84 L0 50Z' fill='none' stroke='rgba(106,15,212,0.06)' stroke-width='0.5'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
  transition: background 0.5s ease;
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,0,0,0.07) 3px, rgba(0,0,0,0.07) 4px);
  pointer-events: none;
  z-index: 9998;
}

* { position: relative; z-index: 1; }

/* ‚îÄ‚îÄ TICKER ‚îÄ‚îÄ */
.ticker {
  background: var(--t-accent1);
  color: #ffffff;
  font-family: var(--mono);
  font-size: .88rem;
  letter-spacing: 0.2em;
  padding: 0.28rem 0;
  overflow: hidden;
  white-space: nowrap;
}
.ticker-inner { display: inline-block; animation: tick 32s linear infinite; }
@keyframes tick { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }

/* ‚îÄ‚îÄ MASTHEAD ‚îÄ‚îÄ */
.masthead {
  padding: 2.5rem 3rem 0;
  border-bottom: 1px solid var(--t-rim2);
  overflow: hidden;
  position: relative;
}

.masthead::before {
  content: '';
  position: absolute; inset: 0;
  background:
    linear-gradient(90deg, transparent calc(33% - 0.5px), rgba(106,15,212,0.12) 33%, transparent calc(33% + 0.5px)),
    linear-gradient(90deg, transparent calc(66% - 0.5px), rgba(255,72,0,0.07) 66%, transparent calc(66% + 0.5px));
  pointer-events: none;
}

.mast-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }

.eva-tag {
  font-family: var(--mono);
  font-size: .88rem;
  letter-spacing: 0.25em;
  color: var(--t-accent1);
  text-transform: uppercase;
  display: flex; align-items: center; gap: 0.6rem;
  margin-bottom: 0.5rem;
}
.eva-tag::before {
  content: '';
  display: block; width: 8px; height: 8px;
  background: var(--t-accent1);
  clip-path: polygon(50% 0%,100% 50%,50% 100%,0% 50%);
  animation: dpulse 2s ease-in-out infinite;
}
@keyframes dpulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.3;transform:scale(.7)} }

.paper-name {
  font-family: var(--display);
  font-size: clamp(3.5rem, 10vw, 8rem);
  letter-spacing: 0.06em;
  line-height: 0.88;
  text-transform: uppercase;
  background: var(--t-name-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  transition: background 0.5s ease;
}

.paper-name-sub {
  font-family: var(--display);
  font-size: clamp(1rem, 3vw, 2rem);
  letter-spacing: 0.3em;
  color: var(--t-accent1);
  text-transform: uppercase;
  line-height: 1;
  margin-top: 0.25rem;
  transition: color 0.5s ease;
}

.mast-sep {
  height: 3px; margin-top: 1.5rem;
  background: var(--t-sep);
  transition: background 0.5s ease;
}

.mast-right {
  text-align: right;
  font-family: var(--mono);
  font-size: 0.72rem;
  color: var(--t-text3);
  letter-spacing: 0.1em;
  line-height: 2.2;
  text-transform: uppercase;
  opacity: 0.6;
}
.mast-right .hl { color: var(--t-accent3); opacity: 1; }

.mast-meta-bar {
  display: flex; gap: 2.5rem; padding: 0.6rem 0;
  font-family: var(--mono); font-size: .76rem;
  color: var(--t-text3); letter-spacing: 0.12em;
  text-transform: uppercase; flex-wrap: wrap;
}
.mast-meta-bar span { display: flex; align-items: center; gap: 0.4rem; }
.pulse-dot { width: 4px; height: 4px; border-radius: 50%; background: var(--t-accent3); box-shadow: 0 0 6px var(--t-accent3); animation: dpulse 2s infinite; }

/* ‚îÄ‚îÄ PAGE ‚îÄ‚îÄ */
.page { max-width: 1040px; margin: 0 auto; padding: 0 3rem 8rem; }

/* ‚îÄ‚îÄ MODE BAR ‚îÄ‚îÄ */
.mode-bar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 0; border-bottom: 1px solid var(--t-rim);
  margin-bottom: 2.5rem; gap: 1rem; flex-wrap: wrap;
}
.mode-tabs { display: flex; gap: 1px; }

.mode-tab {
  font-family: var(--mono); font-size: .76rem;
  letter-spacing: .15em; text-transform: uppercase;
  padding: .5rem 1.1rem; cursor: pointer;
  border: 1px solid var(--t-rim2); background: none;
  color: var(--t-text3); transition: all .15s;
  clip-path: polygon(6px 0%, 100% 0%, calc(100% - 6px) 100%, 0% 100%);
}
.mode-tab:hover { color: var(--t-text2); }
.mode-tab.active { background: var(--t-accent1); color: #fff; border-color: var(--t-accent1); box-shadow: 0 0 16px rgba(106,15,212,.4); }

.right-bar { display: flex; gap: .5rem; align-items: center; }

.tx-btn {
  font-family: var(--mono); font-size: .8rem; letter-spacing: .15em;
  text-transform: uppercase; padding: .55rem 1.5rem;
  background: var(--t-accent2); color: #fff; border: none; cursor: pointer;
  clip-path: polygon(10px 0%, 100% 0%, calc(100% - 10px) 100%, 0% 100%);
  box-shadow: 0 0 20px rgba(255,72,0,.35); transition: all .15s;
}
.tx-btn:hover { background: var(--t-accent2); box-shadow: 0 0 30px rgba(255,72,0,.5); }

.ghost-btn {
  font-family: var(--mono); font-size: .76rem; letter-spacing: .1em;
  text-transform: uppercase; padding: .45rem .9rem;
  background: none; color: var(--t-text3); border: 1px solid var(--t-rim2); cursor: pointer; transition: all .15s;
}
.ghost-btn:hover { color: var(--t-text2); border-color: var(--t-rim2); }

.autosave { font-family: var(--mono); font-size: .88rem; color: var(--t-accent3); letter-spacing: .1em; display: none; }

/* ‚îÄ‚îÄ ISSUE HERO ‚îÄ‚îÄ */
.issue-hero {
  display: grid; grid-template-columns: auto 1fr auto;
  gap: 2rem; align-items: center;
  padding: 2rem 0; border-bottom: 1px solid var(--t-rim); margin-bottom: 2.5rem;
}
.issue-glyph {
  font-family: var(--display); font-size: 8rem; line-height: 1;
  color: transparent; -webkit-text-stroke: 1px var(--t-rim2);
  filter: drop-shadow(0 0 20px rgba(106,15,212,.2));
}
.issue-label { font-family: var(--mono); font-size: .88rem; letter-spacing: .25em; text-transform: uppercase; color: var(--t-accent1); margin-bottom: .3rem; }
.issue-week { font-family: var(--display); font-size: clamp(1.6rem,4vw,3rem); letter-spacing: .1em; color: var(--t-text); text-transform: uppercase; line-height: 1; }
.issue-pulse { font-family: var(--serif); font-style: italic; font-size: 1.05rem; color: var(--t-text2); margin-top: .5rem; max-width: 500px; line-height: 1.5; }
.issue-right { text-align: right; }
.issue-author-label { font-family: var(--mono); font-size: .85rem; letter-spacing: .18em; text-transform: uppercase; color: var(--t-text3); margin-bottom: .25rem; }
.issue-author-name { font-family: var(--display); font-size: 1.6rem; letter-spacing: .1em; color: var(--t-text2); }
.issue-date { font-family: var(--mono); font-size: .88rem; color: var(--t-text3); letter-spacing: .1em; margin-top: .2rem; }

/* ‚îÄ‚îÄ DIVISION HEADERS ‚îÄ‚îÄ */
.div-header {
  display: flex; align-items: center; gap: 1.25rem;
  padding: 1.25rem 0 1rem;
  margin-top: 1rem;
}
.div-header:first-of-type { margin-top: 0; }

.div-stripe {
  width: 4px; height: 48px; border-radius: 2px; flex-shrink: 0;
}
/* Stripe accent bar colours per section ‚Äî all use the theme tokens.
   To change a section's accent: update the token in the active theme's CSS block above.
   stripe-spice = accent3 (lime/bright), stripe-org = accent2 (secondary), stripe-pur/sand = accent1 (primary) */
.stripe-spice  { background: var(--t-accent3);   box-shadow: 0 0 12px rgba(209,238,120,.35); }
.stripe-org    { background: var(--t-accent2);   box-shadow: 0 0 12px rgba(107,82,245,.4); }
.stripe-pur    { background: var(--t-accent1);   box-shadow: 0 0 12px rgba(81,56,238,.4); }
.stripe-grn    { background: var(--t-accent3);   box-shadow: 0 0 12px rgba(209,238,120,.35); }
.stripe-sand   { background: var(--t-accent1);   box-shadow: 0 0 12px rgba(81,56,238,.3); }

.div-name {
  font-family: var(--display);
  font-size: clamp(1.8rem, 4vw, 2.6rem);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  line-height: 1;
}
.dn-spice  { color: var(--t-text);   filter: drop-shadow(0 0 10px rgba(81,56,238,.4)); }
.dn-org    { color: var(--t-text);   filter: drop-shadow(0 0 10px rgba(107,82,245,.4)); }
.dn-pur    { color: var(--t-text);   filter: drop-shadow(0 0 10px rgba(81,56,238,.4)); }
.dn-grn    { color: var(--t-text);   filter: drop-shadow(0 0 10px rgba(209,238,120,.25)); }
.dn-sand   { color: var(--t-text);   filter: drop-shadow(0 0 10px rgba(81,56,238,.3)); }

.div-rule { flex: 1; height: 1px; background: var(--t-rim); }

/* ‚îÄ‚îÄ THREE-COL GRID (per division) ‚îÄ‚îÄ */
.div-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1px;
  background: var(--t-rim);
  border: 1px solid var(--t-rim);
  margin-bottom: 0.5rem;
}

/* C-Suite is special: 2 cols */
.div-grid.two-col { grid-template-columns: 1fr 1fr; }

.div-cell {
  background: var(--t-panel);
  padding: 1.25rem 1.25rem 1.5rem;
}

.cell-label {
  font-family: var(--mono);
  font-size: .88rem;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  margin-bottom: 0.85rem;
  display: flex; align-items: center; gap: 0.5rem;
}
.cell-label::before { content: ''; display: block; width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }

.cl-shipped::before { background: var(--t-accent3);  box-shadow: 0 0 6px var(--t-accent3); }
.cl-blocked::before { background: #e05060;            box-shadow: 0 0 6px #e05060; }
.cl-next::before    { background: var(--t-accent1);   box-shadow: 0 0 6px var(--t-accent1); }
.cl-brief::before   { background: var(--t-accent1);   box-shadow: 0 0 6px var(--t-accent1); }
.cl-dec::before     { background: #e05060;            box-shadow: 0 0 6px #e05060; }

.cl-shipped { color: var(--t-text2); }
.cl-blocked { color: #e07080; }
.cl-next    { color: var(--t-text2); }
.cl-brief   { color: var(--t-text2); }
.cl-dec     { color: #e07080; }

/* ‚îÄ‚îÄ ITEMS ‚îÄ‚îÄ */
.item-list { display: flex; flex-direction: column; gap: 0.45rem; }

.row-item { display: flex; gap: 0.6rem; align-items: baseline; }

.row-bullet { font-family: var(--mono); font-size: .82rem; flex-shrink: 0; margin-top: 1px; }
.b-grn  { color: var(--t-accent3); }
.b-org  { color: var(--t-accent2); }
.b-pur  { color: var(--t-accent1); }
.b-spice{ color: var(--t-gold); }

.row-text { font-size: 1rem; color: var(--t-text); line-height: 1.5; font-weight: 300; }

.blocked-pill {
  background: rgba(255,72,0,0.07);
  border: 1px solid rgba(255,72,0,0.2);
  border-left: 2px solid var(--t-accent2);
  padding: 0.55rem 0.75rem;
  margin-bottom: 0.4rem;
}
.blocked-pill:last-child { margin-bottom: 0; }
.blocked-text { font-size: 1rem; color: var(--t-text); font-weight: 300; line-height: 1.5; }

.none-label { font-family: var(--mono); font-size: .92rem; color: var(--t-text3); letter-spacing: 0.1em; padding: 0.3rem 0; }

/* ‚îÄ‚îÄ SHOUTOUTS ROW ‚îÄ‚îÄ */
.shouts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 1px;
  background: var(--t-rim);
  border: 1px solid var(--t-rim);
  margin-bottom: 0.5rem;
}

.shout-card {
  background: var(--t-panel);
  padding: 1.1rem 1.25rem;
  position: relative; overflow: hidden;
}
.shout-card::before {
  content: '‚òÖ';
  position: absolute; right: 0.9rem; top: 0.75rem;
  font-size: .8rem; color: var(--t-gold); opacity: 0.35;
}
.shout-who { font-family: var(--mono); font-size: .76rem; text-transform: uppercase; letter-spacing: .15em; color: var(--t-text); margin-bottom: .3rem; }
.shout-what { font-size: 1rem; color: var(--t-text); font-weight: 300; line-height: 1.5; }

/* ‚îÄ‚îÄ QUESTIONS ‚îÄ‚îÄ */
.q-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1px;
  background: var(--t-rim);
  border: 1px solid var(--t-rim);
  margin-bottom: 0.5rem;
}

.q-cell {
  background: var(--t-panel);
  padding: 1rem 1.25rem;
  display: flex; gap: 0.75rem; align-items: baseline;
}
.q-n { font-family: var(--mono); font-size: .85rem; color: var(--t-text2); flex-shrink: 0; }
.q-text { font-size: 1rem; color: var(--t-text); font-weight: 300; line-height: 1.5; }

/* ‚îÄ‚îÄ DUNE QUOTE PANEL ‚îÄ‚îÄ */
.dune-trigger-bar {
  display: flex; align-items: center; justify-content: space-between;
  margin: 2.5rem 0 0;
  padding: 1rem 1.25rem;
  background: var(--t-panel);
  border: 1px solid var(--t-rim);
  border-top: 2px solid var(--t-gold);
}

.dune-trigger-left { display: flex; align-items: center; gap: 1rem; }

.dune-worm-wrap {
  width: 120px; height: 150px; flex-shrink: 0; position: relative;
}
.dune-worm {
  width: 120px; height: 150px;
  animation: worm-rise 4s ease-in-out infinite, worm-glow-pulse 4s ease-in-out infinite;
  overflow: visible;
  filter: drop-shadow(0 0 14px rgba(232,160,32,0.5));
}
@keyframes worm-rise {
  0%   { transform: translateY(0px) scale(1) rotate(-0.5deg); }
  25%  { transform: translateY(-10px) scale(1.03) rotate(0.8deg); }
  50%  { transform: translateY(-6px) scale(1.015) rotate(0deg); }
  75%  { transform: translateY(-13px) scale(1.04) rotate(-0.8deg); }
  100% { transform: translateY(0px) scale(1) rotate(-0.5deg); }
}
@keyframes worm-glow-pulse {
  0%,100% { filter: drop-shadow(0 0 14px rgba(232,160,32,0.5)); }
  40%     { filter: drop-shadow(0 0 30px rgba(232,160,32,1)) drop-shadow(0 0 55px rgba(255,72,0,0.4)); }
  75%     { filter: drop-shadow(0 0 40px rgba(232,160,32,0.95)) drop-shadow(0 0 70px rgba(255,72,0,0.5)); }
}
.dune-worm-wrap::before {
  content: '';
  position: absolute; bottom: -6px; left: 50%;
  transform: translateX(-50%);
  width: 100px; height: 18px;
  border-radius: 50%;
  background: radial-gradient(ellipse, rgba(200,120,40,0.3) 0%, transparent 70%);
  animation: sand-glow 4s ease-in-out infinite;
  pointer-events: none;
}
@keyframes sand-glow {
  0%,100% { opacity: 0.4; transform: translateX(-50%) scaleX(0.85); }
  50%     { opacity: 1;   transform: translateX(-50%) scaleX(1.15); }
}

.dune-trigger-label {
  font-family: var(--mono); font-size: .76rem;
  text-transform: uppercase; letter-spacing: .15em;
  color: var(--t-text3); line-height: 1.6;
}
.dune-trigger-label strong { color: var(--t-gold); display: block; font-size: .82rem; }

.spice-btn {
  font-family: var(--mono); font-size: .8rem;
  letter-spacing: .15em; text-transform: uppercase;
  padding: .55rem 1.4rem; background: none;
  border: 1px solid var(--t-gold); color: var(--t-gold);
  cursor: pointer; transition: all .2s;
  clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%);
}
.spice-btn:hover { background: rgba(232,160,32,.1); box-shadow: 0 0 20px rgba(232,160,32,.25); }
.spice-btn:active { transform: scale(.97); }

/* Quote display */
.quote-display {
  display: none;
  background: var(--t-slab);
  border: 1px solid var(--t-rim2);
  border-top: none;
  padding: 2.5rem 3rem;
  position: relative;
  overflow: hidden;
  animation: quoteReveal .4s ease;
}
.quote-display.visible { display: block; }

@keyframes quoteReveal {
  from { opacity: 0; transform: translateY(-8px); }
  to   { opacity: 1; transform: translateY(0); }
}

.quote-display::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, transparent, var(--t-gold), transparent);
  opacity: .5;
}

.quote-sand-line {
  position: absolute; bottom: 0; left: 0; right: 0; height: 60px;
  background: linear-gradient(0deg, rgba(200,120,40,.06) 0%, transparent 100%);
  pointer-events: none;
}

.quote-source {
  font-family: var(--mono); font-size: .88rem;
  text-transform: uppercase; letter-spacing: .2em;
  color: var(--t-gold); margin-bottom: 1.25rem;
  display: flex; align-items: center; gap: .75rem;
}
.quote-source::after { content: ''; flex: 1; height: 1px; background: linear-gradient(90deg, var(--t-rim2), transparent); }

.quote-text {
  font-family: var(--serif);
  font-size: clamp(1.1rem, 2.5vw, 1.5rem);
  font-style: italic;
  font-weight: 300;
  color: var(--t-gold2);
  line-height: 1.7;
  margin-bottom: 1.5rem;
  max-width: 760px;
  filter: drop-shadow(0 0 20px rgba(253,232,184,.1));
}

.quote-attribution {
  font-family: var(--mono); font-size: .92rem;
  color: var(--t-gold); letter-spacing: .1em;
  text-transform: uppercase; margin-bottom: 0.5rem;
}

.quote-loc {
  font-family: var(--mono); font-size: .76rem;
  color: var(--t-text3); letter-spacing: .06em;
  line-height: 1.6; margin-bottom: 1.75rem;
  max-width: 680px; font-style: italic;
}

.quote-divider {
  width: 60px; height: 1px;
  background: linear-gradient(90deg, var(--t-gold), transparent);
  margin-bottom: 1.5rem;
}

.quote-meaning-label {
  font-family: var(--mono); font-size: .88rem;
  text-transform: uppercase; letter-spacing: .18em;
  color: var(--t-accent1); margin-bottom: .75rem;
  display: flex; align-items: center; gap: .6rem;
}
.quote-meaning-label::before { content: '‚¨°'; font-size: .85rem; }

.quote-meaning {
  font-size: 1.05rem;
  color: var(--t-text2);
  font-weight: 300;
  line-height: 1.75;
  max-width: 720px;
  border-left: 2px solid var(--t-accent1);
  padding-left: 1rem;
}

.quote-loading {
  font-family: var(--mono); font-size: .85rem;
  color: var(--t-text3); letter-spacing: .15em;
  text-transform: uppercase; text-align: center;
  padding: 2rem;
  animation: blink 1s ease-in-out infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.3} }

/* ‚îÄ‚îÄ COMPOSE ‚îÄ‚îÄ */
.compose-header {
  background: var(--t-panel); border: 1px solid var(--t-rim2);
  border-top: 3px solid var(--t-accent1); padding: 1.5rem;
  margin-bottom: 2rem; display: grid;
  grid-template-columns: 1fr 1fr 1fr; gap: 1.25rem;
  box-shadow: 0 0 30px rgba(106,15,212,.08);
}

.cf label { font-family: var(--mono); font-size: .85rem; text-transform: uppercase; letter-spacing: .15em; color: var(--t-text3); display: block; margin-bottom: .35rem; }
.cf input {
  width: 100%; background: var(--t-slab); border: 1px solid var(--t-rim);
  border-bottom: 2px solid var(--t-rim2); color: var(--t-text);
  font-family: var(--mono); font-size: .92rem; padding: .5rem .65rem; outline: none; transition: border-color .15s;
}
.cf input:focus { border-bottom-color: var(--t-accent1); }
.cf input::placeholder { color: var(--t-text3); }

.cs-section { padding: 1.5rem 0; border-bottom: 1px solid var(--t-rim); }
.cs-section:last-of-type { border-bottom: none; }

.cs-hdr {
  font-family: var(--mono); font-size: .76rem; text-transform: uppercase; letter-spacing: .18em;
  margin-bottom: 1.25rem; display: flex; align-items: center; gap: .75rem;
}
.cs-hdr::after { content: ''; flex: 1; height: 1px; background: var(--t-rim); }
.cs-hdr.c-spice { color: var(--t-text); }
.cs-hdr.c-org   { color: var(--t-text); }
.cs-hdr.c-pur   { color: var(--t-text); }
.cs-hdr.c-grn   { color: var(--t-text); }

.cs-sub { font-family: var(--mono); font-size: .88rem; text-transform: uppercase; letter-spacing: .1em; margin-bottom: .5rem; margin-top: 1rem; }
.cs-sub.c-grn  { color: var(--t-text2); }
.cs-sub.c-org  { color: var(--t-text2); }
.cs-sub.c-pur  { color: var(--t-text2); }
.cs-sub.c-spice{ color: var(--t-text2); }

.edit-row {
  display: flex; gap: .5rem; margin-bottom: .45rem; align-items: center;
}
.edit-row textarea {
  flex: 1; background: var(--t-slab); border: 1px solid var(--t-rim);
  border-bottom: 2px solid var(--t-rim2); color: var(--t-text);
  font-family: var(--serif); font-size: 1.05rem; font-weight: 300;
  padding: .45rem .65rem; outline: none; transition: border-color .15s;
  resize: vertical; min-height: 42px; line-height: 1.55;
}
.edit-row textarea:focus { border-bottom-color: var(--t-accent1); }
.edit-row textarea::placeholder { color: var(--t-text3); font-style: italic; }

.shout-row {
  display: grid; grid-template-columns: 160px 1fr auto;
  gap: .5rem; margin-bottom: .45rem; align-items: center;
}
.shout-row input {
  background: var(--t-slab); border: 1px solid var(--t-rim);
  border-bottom: 2px solid var(--t-rim2); color: var(--t-text);
  font-family: var(--mono); font-size: .92rem; padding: .45rem .65rem; outline: none; transition: border-color .15s; width: 100%;
}
.shout-row input:focus { border-bottom-color: var(--t-gold); }
.shout-row input::placeholder { color: var(--t-text3); }

.del-btn {
  background: none; border: 1px solid var(--t-rim); color: var(--t-text3);
  cursor: pointer; font-size: .8rem; padding: .45rem .5rem;
  transition: all .1s; font-family: var(--mono); line-height: 1; flex-shrink: 0;
}
.del-btn:hover { color: var(--t-accent2); border-color: var(--t-accent2); }

.add-btn {
  background: none; border: 1px dashed var(--t-rim); color: var(--t-text3);
  font-family: var(--mono); font-size: .88rem; letter-spacing: .1em;
  text-transform: uppercase; padding: .4rem .9rem;
  cursor: pointer; transition: all .15s; margin-top: .25rem;
}
.add-btn:hover { border-color: var(--t-accent1); color: var(--t-accent1); box-shadow: 0 0 8px rgba(106,15,212,.2); }

.compose-footer { display: flex; justify-content: flex-end; margin-top: 2rem; }

/* ‚îÄ‚îÄ ARCHIVE ‚îÄ‚îÄ */
.arc-list { display: flex; flex-direction: column; }
.arc-row {
  display: grid; grid-template-columns: 70px 200px 150px 1fr 100px 30px;
  gap: 1.5rem; align-items: center; padding: 1rem .75rem;
  border-bottom: 1px solid var(--t-rim); cursor: pointer; transition: background .12s; position: relative;
}
.arc-row:hover { background: var(--t-panel); }
.arc-row:last-child { border-bottom: none; }
.arc-row::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: transparent; transition: background .15s; }
.arc-row:hover::before { background: var(--t-accent1); box-shadow: 0 0 8px var(--t-accent1); }
.arc-n { font-family: var(--display); font-size: 2rem; color: var(--t-rim2); -webkit-text-stroke: 1px var(--t-rim2); line-height: 1; }
.arc-week { font-family: var(--mono); font-size: .82rem; text-transform: uppercase; letter-spacing: .08em; color: var(--t-gold); }
.arc-by { font-family: var(--mono); font-size: .92rem; color: var(--t-text3); letter-spacing: .06em; }
.arc-prev { font-size: .82rem; color: var(--t-text3); font-style: italic; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 300; }
.arc-arr { color: var(--t-rim2); font-family: var(--mono); font-size: .8rem; text-align: right; }
.arc-row:hover .arc-arr { color: var(--t-gold); }
.arc-empty { font-family: var(--mono); font-size: .85rem; color: var(--t-text3); text-align: center; padding: 5rem; border: 1px dashed var(--t-rim); letter-spacing: .15em; text-transform: uppercase; }

/* ‚îÄ‚îÄ EMPTY STATE ‚îÄ‚îÄ */
.pane-empty { font-family: var(--mono); font-size: .85rem; color: var(--t-text3); text-align: center; padding: 4rem; border: 1px dashed var(--t-rim); letter-spacing: .15em; text-transform: uppercase; }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
#toasts { position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 9999; display: flex; flex-direction: column; gap: .5rem; }
.toast { background: var(--t-panel2); border: 1px solid var(--t-rim2); border-left: 3px solid var(--t-accent1); color: var(--t-text); font-family: var(--mono); font-size: .8rem; padding: .7rem 1.1rem; letter-spacing: .06em; animation: toastIn .2s ease; box-shadow: 0 0 20px rgba(106,15,212,.2); }
@keyframes toastIn { from{transform:translateX(16px);opacity:0} to{transform:translateX(0);opacity:1} }

/* ‚îÄ‚îÄ THEME PICKER ‚îÄ‚îÄ */
.theme-picker-section {
  margin-bottom: 2.5rem;
  border: 1px solid var(--t-rim2);
  background: var(--t-slab);
  padding: 1.25rem 1.5rem;
}
.theme-picker-label {
  font-family: var(--mono); font-size: .76rem;
  text-transform: uppercase; letter-spacing: .2em;
  color: var(--t-text3); margin-bottom: 1rem;
}
.theme-swatches {
  display: flex; flex-wrap: wrap; gap: .6rem;
}
.theme-swatch {
  display: flex; align-items: center; gap: .55rem;
  padding: .45rem .85rem;
  border: 1px solid var(--t-rim2);
  cursor: pointer; transition: all .15s;
  font-family: var(--mono); font-size: .92rem;
  color: var(--t-text2); letter-spacing: .08em;
  text-transform: uppercase; background: var(--t-panel);
  clip-path: polygon(6px 0%, 100% 0%, calc(100% - 6px) 100%, 0% 100%);
}
.theme-swatch:hover { border-color: var(--t-accent1); color: var(--t-text); }
.theme-swatch.active { border-color: var(--t-gold); color: var(--t-gold); background: rgba(255,255,255,.04); }
.swatch-dot {
  width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0;
}

/* ‚îÄ‚îÄ ARCHIVE THEME BADGE ‚îÄ‚îÄ */
.arc-theme-badge {
  font-family: var(--mono); font-size: .52rem;
  letter-spacing: .08em; text-transform: uppercase;
  padding: .2rem .55rem;
  border-radius: 2px;
  border: 1px solid currentColor;
  white-space: nowrap;
  opacity: 0.85;
}

/* ‚îÄ‚îÄ THEME TRANSITION ‚îÄ‚îÄ */
.masthead, .page, .mode-bar, .ghost-btn, .mode-tab,
.div-header, .div-cell, .shout-card, .q-cell,
.dune-trigger-bar, .quote-display, .issue-hero {
  transition: background 0.5s ease, border-color 0.5s ease, color 0.5s ease;
}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media (max-width: 800px) {
  .masthead, .page { padding-left: 1.25rem; padding-right: 1.25rem; }
  .div-grid, .div-grid.two-col { grid-template-columns: 1fr; }
  .shouts-grid, .q-grid { grid-template-columns: 1fr; }
  .issue-hero { grid-template-columns: 1fr; }
  .issue-glyph { display: none; }
  .issue-right { text-align: left; }
  .compose-header { grid-template-columns: 1fr; }
  .arc-row { grid-template-columns: 50px 1fr 30px; }
  .arc-by, .arc-prev { display: none; }
  .shout-row { grid-template-columns: 1fr 1fr auto; }
  .quote-display { padding: 1.5rem; }
  .theme-swatches { gap: .4rem; }
  .arc-theme-badge { display: none; }
}

/* ‚îÄ‚îÄ EXPORT MODAL ‚îÄ‚îÄ */
.export-modal-backdrop {
  position: fixed; inset: 0;
  background: rgba(5,4,7,.85); z-index: 5000;
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(6px);
  opacity: 0; pointer-events: none;
  transition: opacity 0.18s ease;
}
.export-modal-backdrop.open { opacity: 1; pointer-events: all; }
.export-modal {
  background: var(--t-panel); border: 1px solid var(--t-rim2);
  border-top: 3px solid var(--t-gold); padding: 2rem;
  width: 400px; max-width: 95vw;
  box-shadow: 0 0 60px rgba(232,160,32,.15);
  transform: translateY(8px); transition: transform 0.18s ease;
}
.export-modal-backdrop.open .export-modal { transform: translateY(0); }
.em-title { font-family: var(--display); font-size: 1.8rem; letter-spacing: .12em; color: var(--t-gold); margin-bottom: .25rem; }
.em-sub { font-family: var(--mono); font-size: .76rem; color: var(--t-text3); letter-spacing: .08em; margin-bottom: 1.5rem; line-height: 1.6; }
.em-options { display: flex; flex-direction: column; gap: .5rem; margin-bottom: 1.25rem; }
.em-opt {
  display: flex; align-items: center; gap: 1rem; padding: .9rem 1rem;
  background: var(--t-slab); border: 1px solid var(--t-rim); cursor: pointer; transition: all .15s;
}
.em-opt:hover { border-color: var(--t-gold); background: rgba(232,160,32,.06); box-shadow: 0 0 16px rgba(232,160,32,.12); }
.em-opt-icon { font-size: 1.6rem; flex-shrink: 0; width: 36px; text-align: center; }
.em-opt-title { font-family: var(--mono); font-size: .88rem; color: var(--t-gold); text-transform: uppercase; letter-spacing: .1em; }
.em-opt-desc  { font-family: var(--mono); font-size: .88rem; color: var(--t-text3); letter-spacing: .04em; margin-top: .15rem; line-height: 1.5; }
.em-cancel {
  font-family: var(--mono); font-size: .76rem; color: var(--t-text3); letter-spacing: .12em;
  text-transform: uppercase; background: none; border: none; cursor: pointer;
  width: 100%; text-align: center; padding: .5rem; transition: color .15s;
}
.em-cancel:hover { color: var(--t-text); }
</style>
</head>
<body>

<div class="ticker">
  <span class="ticker-inner">‚óÜ FRIDAY TRANSMISSION ‚Äî THE WEEK IS DONE ‚Äî READ THIS BEFORE YOU LOG OFF ‚Äî ‚óÜ THE SPICE MUST FLOW ‚Äî ‚óÜ SEE YOU MONDAY ‚Äî ‚óÜ FRIDAY TRANSMISSION ‚Äî THE WEEK IS DONE ‚Äî READ THIS BEFORE YOU LOG OFF ‚Äî ‚óÜ THE SPICE MUST FLOW ‚Äî ‚óÜ SEE YOU MONDAY ‚Äî &nbsp;&nbsp;&nbsp;</span>
</div>

<div class="masthead">
  <div class="mast-top">
    <div>
      <div class="eva-tag">Weekly Intelligence Transmission</div>
      <div class="paper-name">Friday<br>Brief</div>
      <div class="paper-name-sub">All Divisions ¬∑ All Hands</div>
    </div>
    <div class="mast-right">
      <div id="mast-issue">Issue ‚Äî</div>
      <div id="mast-week">Week of ‚Äî</div>
      <div id="mast-author">By ‚Äî</div>
      <div class="hl" id="mast-status">NO ISSUE TRANSMITTED</div>
    </div>
  </div>
  <div class="mast-sep"></div>
  <div class="mast-meta-bar">
    <span><div class="pulse-dot"></div><span id="meta-live">AWAITING TRANSMISSION</span></span>
    <span>DISTRIBUTED EVERY FRIDAY</span>
    <span>MONDAY MEETING PREP</span>
  </div>
</div>

<div class="page">

  <div class="mode-bar">
    <div class="mode-tabs">
      <button class="mode-tab active" onclick="switchMode('read')"    id="tab-read">Read</button>
      <button class="mode-tab"        onclick="switchMode('compose')" id="tab-compose">Compose</button>
      <button class="mode-tab"        onclick="switchMode('archive')" id="tab-archive">Archive</button>
    </div>
    <div class="right-bar">
      <span class="autosave" id="autosave">DRAFT SAVED</span>
      <button class="ghost-btn" onclick="openExportModal()">‚Üì Export</button>
      <button class="ghost-btn" onclick="triggerImport()">‚Üë Restore Backup</button>
    </div>
  </div>

  <!-- READ -->
  <div id="view-read">
    <div id="read-empty" class="pane-empty" style="display:none">NO ISSUE TRANSMITTED YET ‚Äî SWITCH TO COMPOSE TO CREATE THE FIRST BRIEF</div>
    <div id="read-body"></div>
  </div>

  <!-- COMPOSE -->
  <div id="view-compose" style="display:none">
    <div class="compose-header">
      <div class="cf"><label>Week of</label><input id="ef-week" type="text" placeholder="e.g. March 10‚Äì14, 2025" oninput="saveDraft()"></div>
      <div class="cf"><label>Author (rotation)</label><input id="ef-author" type="text" placeholder="Name" oninput="saveDraft()"></div>
      <div class="cf"><label>One-line pulse</label><input id="ef-pulse" type="text" placeholder="e.g. Strong week ‚Äî one blocker to watch" oninput="saveDraft()"></div>
    </div>

    <!-- THEME PICKER -->
    <div class="theme-picker-section">
      <div class="theme-picker-label">Author Theme ‚Äî this week's visual identity</div>
      <div class="theme-swatches" id="theme-swatches"></div>
    </div>

    <div class="cs-section">
      <div class="cs-hdr c-spice">‚óÜ C-Suite</div>
      <div class="cs-sub c-spice">This week in brief</div>
      <div id="cs-brief-list"></div>
      <button class="add-btn" onclick="addRow('cs-brief-list','1‚Äì2 sentence summary for leadership')">+ Add</button>
      <div class="cs-sub c-org" style="margin-top:1rem">Needs decision or awareness</div>
      <div id="cs-dec-list"></div>
      <button class="add-btn" onclick="addRow('cs-dec-list','What does leadership need to act on?')">+ Add</button>
    </div>

    <div class="cs-section">
      <div class="cs-hdr c-org">‚óà Sales</div>
      <div class="cs-sub c-grn">Wins / Closed</div>
      <div id="sa-win-list"></div>
      <button class="add-btn" onclick="addRow('sa-win-list','Deals, demos, pipeline movement‚Ä¶')">+ Add</button>
      <div class="cs-sub c-org" style="margin-top:1rem">Blocked</div>
      <div id="sa-blk-list"></div>
      <button class="add-btn" onclick="addRow('sa-blk-list','What needs unblocking?')">+ Add</button>
      <div class="cs-sub c-pur" style="margin-top:1rem">Next week</div>
      <div id="sa-nxt-list"></div>
      <button class="add-btn" onclick="addRow('sa-nxt-list','Upcoming meetings, demos, targets‚Ä¶')">+ Add</button>
    </div>

    <div class="cs-section">
      <div class="cs-hdr c-pur">‚¨° Project Management</div>
      <div class="cs-sub c-grn">Shipped / Milestones hit</div>
      <div id="pm-ship-list"></div>
      <button class="add-btn" onclick="addRow('pm-ship-list','What got done or hit a milestone?')">+ Add</button>
      <div class="cs-sub c-org" style="margin-top:1rem">Blocked / At risk</div>
      <div id="pm-blk-list"></div>
      <button class="add-btn" onclick="addRow('pm-blk-list','What is at risk or blocked?')">+ Add</button>
      <div class="cs-sub c-pur" style="margin-top:1rem">Next week focus</div>
      <div id="pm-nxt-list"></div>
      <button class="add-btn" onclick="addRow('pm-nxt-list','Priorities for next week?')">+ Add</button>
    </div>

    <div class="cs-section">
      <div class="cs-hdr c-grn">‚¨¢ Engineering</div>
      <div class="cs-sub c-grn">Shipped this week</div>
      <div id="en-ship-list"></div>
      <button class="add-btn" onclick="addRow('en-ship-list','What shipped, merged, or was validated?')">+ Add</button>
      <div class="cs-sub c-org" style="margin-top:1rem">Blocked</div>
      <div id="en-blk-list"></div>
      <button class="add-btn" onclick="addRow('en-blk-list','What is technically blocked?')">+ Add</button>
      <div class="cs-sub c-pur" style="margin-top:1rem">Next week</div>
      <div id="en-nxt-list"></div>
      <button class="add-btn" onclick="addRow('en-nxt-list','What are engineers focused on next week?')">+ Add</button>
    </div>

    <div class="cs-section">
      <div class="cs-hdr c-spice">‚òÖ Shoutouts</div>
      <div id="sh-list"></div>
      <button class="add-btn" onclick="addShout()">+ Add shoutout</button>
    </div>

    <div class="cs-section">
      <div class="cs-hdr c-pur">? Open Questions for Monday</div>
      <div id="q-list"></div>
      <button class="add-btn" onclick="addRow('q-list','A question for the team on Monday‚Ä¶')">+ Add</button>
    </div>

    <div class="compose-footer">
      <button class="tx-btn" onclick="publish()">Transmit Friday Brief ‚Üí</button>
    </div>
  </div>

  <!-- ARCHIVE -->
  <div id="view-archive" style="display:none">
    <div class="arc-list" id="arc-list"></div>
  </div>

</div>
<!-- EXPORT MODAL -->
<div class="export-modal-backdrop" id="export-modal" onclick="if(event.target===this)closeExportModal()">
  <div class="export-modal">
    <div class="em-title">Export Brief</div>
    <div class="em-sub">Choose your format. JSON is for backup and restore. PDF is for sharing or printing.</div>
    <div class="em-options">
      <div class="em-opt" onclick="doExportJSON()">
        <div class="em-opt-icon">üì¶</div>
        <div>
          <div class="em-opt-title">JSON Backup</div>
          <div class="em-opt-desc">All issues and your current draft. Use "Restore Backup" to reload on any device or browser.</div>
        </div>
      </div>
      <div class="em-opt" onclick="doExportPDF()">
        <div class="em-opt-icon">üìÑ</div>
        <div>
          <div class="em-opt-title">PDF ‚Äî Current Issue</div>
          <div class="em-opt-desc">Print-ready version of the current issue. Opens browser print dialog with optimized layout.</div>
        </div>
      </div>
    </div>
    <button class="em-cancel" onclick="closeExportModal()">Cancel</button>
  </div>
</div>

<div id="toasts"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// THE FRIDAY BRIEF ‚Äî source guide
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//
// FILE STRUCTURE:
//   <style>          ‚Äî all CSS: theme tokens, component styles, responsive
//   <body>           ‚Äî static shell: ticker, masthead, mode bar, 3 view panels
//   <script>
//     DUNE_QUOTES    ‚Äî quote database (add/remove quotes here)
//     THEMES         ‚Äî theme registry (add themes here)
//     THEME SYSTEM   ‚Äî applyTheme(), runTerminalBoot(), renderThemePicker()
//     STATE          ‚Äî issues[], draft{}, siteTheme ‚Äî persisted to localStorage
//     MODE           ‚Äî switchMode() ‚Äî controls which panel is visible
//     READ           ‚Äî renderRead(), buildRead(), buildDivBlock() etc.
//     COMPOSE        ‚Äî renderCompose(), saveDraft(), addRow(), publish()
//     ARCHIVE        ‚Äî renderArchive(), viewIssue()
//     EXPORT/IMPORT  ‚Äî doExportJSON(), doExportPDF(), triggerImport()
//     UTILS          ‚Äî esc(), toast(), getThisWeekString()
//     SAMPLE DATA    ‚Äî seedSample() ‚Äî loads demo on first run
//     INIT           ‚Äî load(), applyTheme(), seedSample(), renderRead()
//
// TO ADD A SECTION: see buildRead() and add a buildDivBlock() call + matching HTML in compose
// TO ADD A THEME:   see THEMES comment block above the THEMES array
// TO CHANGE TICKER: edit the .ticker-inner span in <body>
// localStorage key: 'friday_brief_v2'
//
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DUNE QUOTES ‚Äî sourced from the 6 main series books
// Each entry includes book, approximate chapter/location, and speaker context
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const DUNE_QUOTES = [
  { q:"I must not fear. Fear is the mind-killer. Fear is the little-death that brings total obliteration. I will face my fear. I will permit it to pass over me and through me. And when it has gone past I will turn the inner eye to see its path. Where the fear has gone there will be nothing. Only I will remain.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book One, Chapter 1. Paul recites the Bene Gesserit Litany Against Fear during the gom jabbar test administered by Reverend Mother Gaius Helen Mohiam.",
    meaning:"Every blocked task, every failed sensor, every slipped deadline carries a fear response. The Bene Gesserit litany isn't mysticism ‚Äî it's a cognitive protocol. Acknowledge the risk, let it move through your analysis, then keep working. Engineers who freeze under uncertainty are more dangerous than the uncertainty itself." },
  { q:"The mystery of life isn't a problem to solve, but a reality to experience.",
    attr:"Muad'Dib ‚Äî Collected Sayings", book:"Dune (1965)", loc:"Epigraph to Part Two. One of many epigraphs drawn from the in-universe text 'The Collected Sayings of Muad'Dib' by Princess Irulan.",
    meaning:"Not every project ambiguity needs to be resolved before you move forward. Some systems can only be understood by building and running them. Ship the prototype. Instrument it. Experience the data. Understanding follows action." },
  { q:"Deep in the human unconscious is a pervasive need for a logical universe that makes sense. But the real universe is always one step beyond logic.",
    attr:"Collected Sayings of Muad'Dib", book:"Dune (1965)", loc:"Epigraph to a chapter in Book Two. Attributed to Princess Irulan's compilation of Paul's teachings.",
    meaning:"Your architecture diagram is not the system. The spec is not the product. Reality will always present conditions your model didn't account for ‚Äî a CAN message ID that changes, a sensor that drifts at temperature. Build systems that adapt, not just ones that are correct on paper." },
  { q:"The people who can destroy a thing, they control it.",
    attr:"Lady Jessica", book:"Dune (1965)", loc:"Book Two. Lady Jessica speaks to Paul as they navigate survival among the Fremen in the deep desert.",
    meaning:"In engineering and PM alike, whoever understands the failure modes owns the real power. Know how your system breaks. The person who can describe exactly how the LiDAR fails in heavy rain controls the roadmap conversation." },
  { q:"What do you despise? By this are you truly known.",
    attr:"Manual of Muad'Dib", book:"Dune (1965)", loc:"Opening epigraph of Book One. Drawn from Princess Irulan's 'Manual of Muad'Dib' ‚Äî the very first line of the novel.",
    meaning:"What a team refuses to do defines its actual values more than any mission statement. A team that refuses to ship untested code has a real engineering culture. A team that refuses to write blockers in the Friday brief has a culture of hiding problems. Know your team by what it won't tolerate." },
  { q:"The vision of time is broad, but when you pass through it, time becomes a narrow door.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book Three ‚Äî The Prophet. Paul reflects on prescience and the nature of navigating a fixed future during his rise among the Fremen.",
    meaning:"Roadmaps look clean from the outside. Inside execution, every week is a narrow door ‚Äî limited bandwidth, competing priorities, unexpected blockers. The Friday brief is how you document what it actually felt like to walk through the door, not how it looked from the outside." },
  { q:"Any road followed precisely to its end leads precisely nowhere. Climb the mountain just a little to test that it's a mountain. From the top of the mountain, you cannot see the mountain.",
    attr:"Bene Gesserit Proverb", book:"Dune (1965)", loc:"Epigraph in Book Two. One of several Bene Gesserit aphorisms used as chapter epigraphs throughout the novel.",
    meaning:"Don't over-optimize your approach before testing it in the real environment. Bench-testing a sensor suite and field-testing it are different mountains. Ship to the field early and let reality correct your model." },
  { q:"Polish comes from the cities; wisdom from the desert.",
    attr:"Fremen Saying", book:"Dune (1965)", loc:"Recurring Fremen proverb referenced in the appendices and throughout the Fremen chapters of Book Two.",
    meaning:"The most important insights about your product don't come from the office or the roadmap review. They come from the field. From watching the vehicle behave in conditions you didn't model. From listening to the customer describe the problem in their own words. Get into the desert." },
  { q:"A process cannot be understood by stopping it. Understanding must move with the flow of the process, must join it and flow with it.",
    attr:"The First Law of Mentat", book:"Dune (1965)", loc:"Epigraph referencing Mentat philosophy, cited early in the novel as Paul begins his Mentat training.",
    meaning:"You cannot understand a distributed robotics system from a static architecture diagram. You cannot understand a sales pipeline from a snapshot. Understanding requires observing the system in motion ‚Äî instrumenting, logging, watching data flow. Then the diagram makes sense." },
  { q:"The beginning of knowledge is the discovery of something we do not understand.",
    attr:"Frank Herbert", book:"Dune (1965)", loc:"Appendix II ‚Äî The Religion of Dune. Herbert's own voice in the appendices discussing the Fremen and Zensunni philosophical tradition.",
    meaning:"The most honest line in any Friday brief is 'we don't understand why this is happening yet.' That line is not a failure ‚Äî it's the beginning of the next sprint's most important work. Celebrate the discovery of ignorance." },
  { q:"Once men turned their thinking over to machines in the hope that this would set them free. But that only permitted other men with machines to enslave them.",
    attr:"Narrator", book:"Dune (1965)", loc:"Appendix II. Context for the Butlerian Jihad ‚Äî the in-universe event that banned thinking machines and shaped the entire civilization of the Imperium.",
    meaning:"Automation is a tool, not a strategy. A robot that does the wrong thing faster is not an improvement. Define the correct behavior precisely before you automate it, whether that's a CAN message handler or a deployment pipeline." },
  { q:"There is no escape ‚Äî we pay for the violence of our ancestors.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book Three. Paul contemplates the consequences of the Atreides legacy and the jihad he has set in motion.",
    meaning:"Technical debt is inherited violence. Every shortcut a past engineer took is a constraint you now work inside. Acknowledge it honestly in your Friday brief rather than hiding it. The team that names its tech debt can manage it." },
  { q:"All warfare is based on deception.",
    attr:"The Art of War ‚Äî quoted by Thufir Hawat", book:"Dune (1965)", loc:"Book One. Mentat Thufir Hawat quotes Sun Tzu during his strategic briefings to Duke Leto on Arrakeen.",
    meaning:"The best competitive strategy hides its true intent until the moment of commitment. Don't telegraph your product roadmap to the market. Don't let a competitor know which problems you've solved. Ship quietly, then make noise." },
  { q:"Here I am, here I remain.",
    attr:"Duke Leto Atreides", book:"Dune (1965)", loc:"Book One. Duke Leto's private motto and his philosophical acceptance of his dangerous move to Arrakis, knowing the risks but choosing presence over retreat.",
    meaning:"There are moments in every project when the rational choice looks like retreat ‚Äî abandon the approach, descend the scope, delay the timeline. The team that plants its flag and commits to the hard path often finds the problem wasn't as large as the fear suggested." },
  { q:"I will miss the sea, but a person needs new experiences. They jar something deep inside, allowing him to grow.",
    attr:"Duke Leto Atreides", book:"Dune (1965)", loc:"Book One. Leto reflects on leaving Caladan for Arrakis, mourning what he must abandon while understanding the necessity of the change.",
    meaning:"Every pivot, every platform migration, every decision to abandon a comfortable codebase for something better ‚Äî they are all losses and gains simultaneously. The growth is in the jarring, not in staying comfortable." },
  { q:"Survival is the ability to swim in strange water.",
    attr:"Paul Atreides", book:"Dune Messiah (1969)", loc:"Chapter 1. Paul opens the novel reflecting on his twelve-year reign as Emperor and the weight of the jihad carried out in his name.",
    meaning:"Startups are strange water by definition. The engineers, PMs, and sales people who thrive aren't the ones with the best playbook ‚Äî they're the ones who adapt fastest when the playbook fails. Your Friday brief is a tool for staying oriented in the strange water." },
  { q:"The more you know, the more you know you don't know.",
    attr:"Bene Gesserit Saying", book:"Dune Messiah (1969)", loc:"Referenced in the Tleilaxu-Bene Gesserit dialogue chapters. A core tenet of Bene Gesserit epistemology as the conspiracy against Paul deepens.",
    meaning:"Experienced engineers hedge more, not less. The senior developer who says 'I'm not sure, let me check' is not weaker than the junior who gives an immediate answer ‚Äî they are more accurate. Epistemic humility in your Friday brief is a sign of a mature team." },
  { q:"To endure oneself may be the hardest task in the universe.",
    attr:"Paul Atreides ‚Äî Muad'Dib", book:"Dune Messiah (1969)", loc:"Mid-novel. Paul, trapped in his own prescience, reflects on the burden of knowing the consequences of every path he might take.",
    meaning:"The hardest part of leadership is sitting with the honest view of your own organization's weaknesses. The PM who can write clearly about what they themselves got wrong this week ‚Äî not just what others blocked ‚Äî is building something real." },
  { q:"What is it, to win a war? To triumph at a single moment is no victory. The universe remembers only the long slow count.",
    attr:"Princess Irulan ‚Äî In My Father's House", book:"Dune Messiah (1969)", loc:"Epigraph. One of Princess Irulan's historical texts used as chapter epigraphs throughout the novel.",
    meaning:"Shipping a feature is a battle. Winning the market is a war. Keep both timescales in view simultaneously. The Friday brief handles the week ‚Äî but your team should always know which multi-year campaign the week's work is serving." },
  { q:"The gift of words is the gift of deception and illusion.",
    attr:"Leto Atreides II", book:"Children of Dune (1976)", loc:"Early chapters. Leto II reflects on language and power as he and Ghanima plan their survival against the regent Alia's growing madness.",
    meaning:"Progress reports are not progress. A status update that says 'on track' is only as good as the honesty behind it. The Friday brief only works if the blocked section is filled in as honestly as the shipped section." },
  { q:"To suspect your own mortality is to know the beginning of terror; to learn irrefutably that you are mortal is to know the end of terror.",
    attr:"Leto Atreides II", book:"Children of Dune (1976)", loc:"Middle section. Leto, having begun his metamorphosis with the sandtrout skin, contemplates the price of his chosen path to the Golden Path.",
    meaning:"Scoping uncertainty is terrifying. But once you have defined the edges of what you don't know ‚Äî the real timeline, the real constraints ‚Äî the terror ends and the work begins. Name your unknowns explicitly in every brief." },
  { q:"Without change, something sleeps inside us, and seldom awakens. The sleeper must awaken.",
    attr:"Duke Leto Atreides", book:"Children of Dune (1976)", loc:"Referenced in the early chapters during Leto II and Ghanima's discussions of the Golden Path, invoking their grandfather's wisdom.",
    meaning:"The team that hasn't been challenged recently is going dormant. Deliberately introduce constraint, new goals, hard problems. Growth is not the natural state ‚Äî atrophy is. The sleeper in your team must be awakened by interesting work." },
  { q:"The purpose of argument is to change the nature of truth.",
    attr:"Bene Gesserit Precept", book:"Children of Dune (1976)", loc:"Epigraph. Cited in the context of Alia's internal struggle with the possessed memory of Baron Harkonnen and the nature of self-deception.",
    meaning:"Debate in a team is not about winning. It's about updating everyone's model of reality to be more accurate. The team that argues well ships better. The team that suppresses disagreement accumulates invisible technical and strategic debt." },
  { q:"I am not the dream. I am the dreamer.",
    attr:"Leto Atreides II", book:"Children of Dune (1976)", loc:"Late chapters. Leto has completed his transformation and speaks to his sister Ghanima about the nature of his identity and the path he has chosen.",
    meaning:"Your company is not the product. You are the team building it. The product will change, pivot, be sunset. The capability you're building ‚Äî the team, the process, the culture ‚Äî that's what survives and compounds." },
  { q:"All governments suffer a recurring problem: Power attracts pathological personalities. It is not that power corrupts but that it is magnetic to the corruptible.",
    attr:"Leto Atreides II ‚Äî The Stolen Journals", book:"God Emperor of Dune (1981)", loc:"Epigraph. One of many entries from 'The Stolen Journals of Leto II', opening each chapter and representing Leto's 3,500-year perspective on human nature.",
    meaning:"Every growing startup faces this. As the company succeeds, it attracts people who want proximity to success rather than the work itself. The antidote is radical transparency ‚Äî the kind of honesty that a weekly brief, honestly written, enforces." },
  { q:"How often it is that the angry man rages denial of what his inner self is telling him.",
    attr:"Leto Atreides II ‚Äî The Stolen Journals", book:"God Emperor of Dune (1981)", loc:"Epigraph to a mid-novel chapter. Part of Leto's long meditation on human psychology across his millennia of observation.",
    meaning:"The blocker you resist writing down is usually the one most worth writing down. If filling in the 'blocked' section of this brief produces frustration, examine that frustration ‚Äî it is data about where the real problem lives." },
  { q:"Reason is the first victim of strong emotion.",
    attr:"Bene Gesserit Teaching", book:"God Emperor of Dune (1981)", loc:"Epigraph. Leto quotes Bene Gesserit doctrine in his journals, reflecting on the Fish Speakers and the emotional volatility of his enforced peace.",
    meaning:"Post-mortems written in the heat of an incident are unreliable. Friday briefs written while still annoyed at a stakeholder are unreliable. Build in the cooling-off time. Write the brief with the same emotional temperature you'd want to read it at." },
  { q:"The target of the Butlerian Jihad was a machine-attitude as much as the machines.",
    attr:"Leto Atreides II ‚Äî The Stolen Journals", book:"God Emperor of Dune (1981)", loc:"Late chapters. Leto reflects on the true purpose of the Jihad as he discusses history with Moneo, his majordomo.",
    meaning:"Process for process's sake is the machine-attitude. The Friday brief isn't valuable because it exists ‚Äî it's valuable if it changes how people walk into Monday. Evaluate it by its effects, not its completion." },
  { q:"The individual is the key, the final empowerment.",
    attr:"Leto Atreides II ‚Äî The Stolen Journals", book:"God Emperor of Dune (1981)", loc:"Epigraph. Leto's journals throughout the novel circle back to the irreducibility of individual human agency against systemic forces.",
    meaning:"No process substitutes for judgment. The Friday brief gives your team the context to exercise individual judgment well. It doesn't replace the moment when one person sees something no one else sees and makes the call." },
  { q:"There exists no separation between gods and men; one blends softly casual into the other.",
    attr:"Dorinatha ‚Äî The Surpassing", book:"God Emperor of Dune (1981)", loc:"Epigraph. An in-universe philosophical text invoked during Leto's ruminations on his own divinity and its costs.",
    meaning:"The best teams have no hard boundary between 'I don't know how to do this' and 'I figured it out.' They move fluidly through ignorance into competence by default. The separation between junior and senior dissolves in teams with good information flow." },
  { q:"To know a thing well, know its limits. Only when pushed beyond its tolerances will true nature be seen.",
    attr:"The Amtal Rule ‚Äî Bene Gesserit", book:"God Emperor of Dune (1981)", loc:"Referenced in Leto's journals as a principle for testing the true character of people and systems under pressure.",
    meaning:"You don't know your system's failure modes until you've deliberately probed them. Load testing, chaos engineering, red teaming, field trials in adverse conditions ‚Äî these aren't overhead. They are the method for understanding what you've actually built." },
  { q:"The capacity to learn is a gift; the ability to learn is a skill; the willingness to learn is a choice.",
    attr:"Bene Gesserit Axiom", book:"Heretics of Dune (1984)", loc:"Chapter epigraph. Referenced in the Bene Gesserit chapters as Mother Superior Taraza and Reverend Mother Schwangyu debate the training of Miles Teg.",
    meaning:"Your senior engineers have the capacity. They're building the skill. But the willingness ‚Äî to admit in a Friday brief that something they built didn't work, that they learned something they didn't know before ‚Äî that is a choice that defines team culture." },
  { q:"There is no real ending. It's just the place where you stop the story.",
    attr:"Frank Herbert", book:"Heretics of Dune (1984)", loc:"Author interviews contemporaneous with the novel's publication. Herbert used this to explain the open structure of the Dune series.",
    meaning:"No product is ever finished. No integration is ever complete. You ship it to the current state of reality and then the world changes and you adapt. The Friday brief marks where you stopped the story this week. Next week the story continues." },
  { q:"Reach! Grasp! What are you without effort?",
    attr:"Tleilaxu Master Waff", book:"Heretics of Dune (1984)", loc:"Early chapters. Waff addresses his subordinates during the Tleilaxu council scenes, exhorting ambition in their biological experiments.",
    meaning:"Comfortable sprints produce comfortable results. The best teams set targets that require them to stretch ‚Äî not recklessly, but deliberately beyond the comfortable. If your 'Next Week' section never makes anyone slightly nervous, your targets are too low." },
  { q:"Natural selection has no morality. Natural selection doesn't care about your intentions.",
    attr:"Bene Gesserit Archives ‚Äî Mother Superior Taraza", book:"Heretics of Dune (1984)", loc:"Middle section. Taraza reflects on the Scattering and the Honored Matres threat during her private deliberations.",
    meaning:"The market doesn't care how hard your team worked. The hardware doesn't care that the design was elegant. Results are what persist. The Friday brief keeps results visible and honest, disconnected from effort narratives." },
  { q:"No matter how exotic human civilization becomes, no matter the developments of life and society nor the complexity of the machine-human interface, there always come interludes of lonely power when the course of humankind depends upon the relatively simple actions of single individuals.",
    attr:"Bene Gesserit Archives", book:"Heretics of Dune (1984)", loc:"Epigraph to a late chapter. Used in the context of Miles Teg's awakening as a mentat-ghola and the pivotal role of individuals in systemic change.",
    meaning:"There will be a week when one engineer's call, one PM's decision to escalate a blocker, one sales person's judgment on a deal, changes the entire trajectory. The Friday brief keeps everyone informed enough to make those calls well when they arrive." },
  { q:"Every civilization must contend with an unconscious force which can block, betray or countermand almost any conscious intention of the collectivity.",
    attr:"The Dar-es-Balat Message", book:"Heretics of Dune (1984)", loc:"Epigraph. An in-universe document concerning the nature of civilizational inertia, referenced in the opening chapters.",
    meaning:"Organizational inertia is real and mostly invisible. It's the reason good decisions don't get executed, the reason blockers persist for weeks, the reason the same open question appears in five consecutive Friday briefs. Name it. Then fight it deliberately." },
  { q:"Bureaucracy destroys initiative. There is little that bureaucrats hate more than innovation, especially innovation that produces better results than the old routines.",
    attr:"Leto Atreides II", book:"Heretics of Dune (1984)", loc:"Referenced in the context of the Bene Gesserit's own growing institutional inertia, contrasted against the Fish Speaker legacy.",
    meaning:"The enemy of the shipping team is not the market ‚Äî it's internal process. Every approval chain, every meeting that could be an email, every review that blocks rather than enables, is bureaucracy eating initiative. Name it in your brief when it's the actual blocker." },
  { q:"The only past that matters is the one we carry with us into the future.",
    attr:"Reverend Mother Odrade", book:"Chapterhouse: Dune (1985)", loc:"Opening section. Odrade contemplates the Bene Gesserit's accumulated millennia of memory as she navigates the existential threat of the Honored Matres.",
    meaning:"The archive of Friday briefs is more valuable than most teams realize. Not as a record of what happened, but as a map of how you thought ‚Äî what you called blocked, what you thought would ship, what questions you brought to Monday. It is the organizational memory." },
  { q:"Seek freedom and become captive of your desires. Seek discipline and find your liberty.",
    attr:"Bene Gesserit Axiom", book:"Chapterhouse: Dune (1985)", loc:"Epigraph. One of the Bene Gesserit maxims Odrade carries as she shapes the order's final gambit against the Honored Matres.",
    meaning:"This is the paradox of process. Teams that reject all structure in the name of freedom become slaves to chaos ‚Äî reactive, uncoordinated, burning out. Teams that embrace disciplined communication cadences free themselves to do deep work the rest of the time." },
  { q:"She needed the experience of many people, yet she was just one person. She had to accept all that multitude and still remain herself.",
    attr:"Reverend Mother Odrade", book:"Chapterhouse: Dune (1985)", loc:"Late chapters. Odrade absorbs the Other Memory of Reverend Mother Lucilla and contemplates what it means to hold collective knowledge without losing individual judgment.",
    meaning:"This is the PM condition. You hold the context of engineering, sales, and leadership simultaneously while remaining your own coherent voice. The Friday brief is a tool for externalizing that multitude so the whole team can share the load." },
  { q:"Most deadly errors arise from obsolete assumptions.",
    attr:"Bene Gesserit Commentary", book:"Chapterhouse: Dune (1985)", loc:"Epigraph. A Bene Gesserit meditation on the danger of operating from outdated information ‚Äî particularly relevant in the face of the Honored Matre threat.",
    meaning:"The assumption you made six weeks ago about the user, the market, or the technology is the most dangerous thing in your codebase. The Friday brief, read over time, is how you catch when your team is operating on obsolete assumptions." },
  { q:"What senses do we lack that we cannot see and cannot hear another world all around us?",
    attr:"Orange Catholic Bible", book:"Dune (1965)", loc:"Epigraph. An in-universe scriptural text used as a chapter opening in Book Two, inviting contemplation of perception beyond normal human experience.",
    meaning:"The systems you're building have behaviors you can't observe yet ‚Äî they emerge at scale, under load, in field conditions you haven't encountered. Instrument everything. The data will tell you about worlds your current senses can't perceive." },
  { q:"The person who experiences greatness must have a feeling for the myth he is in. He must reflect what is projected upon him.",
    attr:"Collected Sayings of Muad'Dib", book:"Dune (1965)", loc:"Epigraph. One of Princess Irulan's compilations of Paul's aphorisms, exploring the relationship between leadership and narrative.",
    meaning:"Founders and leaders are partially mythological figures whether they like it or not. The story your company tells about itself becomes the story your customers tell about you. Be deliberate about the narrative in every external communication." },
  { q:"You cannot go backward far enough to make your future work.",
    attr:"Fremen Aphorism", book:"Dune Messiah (1969)", loc:"Referenced in Paul's reflections on prescience. The Fremen understanding that returning to the past is not an available path.",
    meaning:"Refactoring to the way it 'should have been' is usually less valuable than building forward. Understand the constraint, work with it, plan to supersede it ‚Äî don't lose months trying to achieve a pristine state that the product will evolve past anyway." },
  { q:"The first step in avoiding a trap is knowing it exists.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book One. Paul's Mentat training surfaces in his analysis of the Harkonnen trap on Arrakis ‚Äî awareness as the primary defensive tool.",
    meaning:"The most common project failure modes are well documented. Scope creep, unclear ownership, unresolved technical debt, missing exit criteria ‚Äî they are traps you can see coming if you're looking. Naming them in your brief is the first step in avoiding them." },
  { q:"Deep in the human unconscious is a pervasive need for a logical universe that makes sense. But the real universe is always one step beyond logic.",
    attr:"Collected Sayings of Muad'Dib", book:"Dune (1965)", loc:"Epigraph to Book Two. Princess Irulan's compilation of Paul's teachings on the limits of rational planning.",
    meaning:"Systems behave in ways models don't predict. Sensors drift. Users behave unexpectedly. Markets move sideways. Plan for logic, but build tolerance for the step beyond it." },
  { q:"I am a net in the sea of time.",
    attr:"Paul Atreides", book:"Dune Messiah (1969)", loc:"Paul's private reflections on his prescience, early in the novel. He sees himself as something that catches futures but cannot hold all of them.",
    meaning:"The PM role is a net in the sea of information. You catch signals from engineering, sales, leadership, and users simultaneously. The Friday brief is how you pull the net out of the water and show the team what you caught." },
  { q:"Truth suffers from too much analysis.",
    attr:"Ancient Fremen Saying", book:"Children of Dune (1976)", loc:"Epigraph. A Fremen aphorism invoked during Leto II's contemplation of his own path and the danger of paralysis by analysis.",
    meaning:"At some point the data is sufficient and the decision needs to be made. Endless analysis is often a form of fear wearing the costume of rigor. Name the decision, state the confidence level, and commit. Iteration is faster than perfection." },
  { q:"The real universe is always one step beyond logic.",
    attr:"Collected Sayings of Muad'Dib", book:"Dune (1965)", loc:"Epigraph, Book Two. A compressed version of Herbert's recurring theme that prescience and planning always fall short of reality.",
    meaning:"Every sprint planning session is an act of optimism. Reality will surprise you. The question is whether your system is resilient to surprise or fragile in the face of it. Design for resilience." },
  { q:"You will lose everything you love. That is the price of all leadership.",
    attr:"Paul Atreides", book:"Dune Messiah (1969)", loc:"Paul in conversation with Stilgar during the middle section of the novel, accepting the personal cost of his position.",
    meaning:"Leadership at the startup stage requires sacrifice of comfort, certainty, and sometimes relationships. Acknowledge this cost honestly. The team that pretends the hard things aren't hard doesn't build the trust required to survive them." },
  { q:"I exist in this moment both in the past and in the future. You see me now. I see you now. But I also see the ten thousand years between us.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book Three. Paul speaks to his Fremen followers after his transformation into Muad'Dib, describing the quality of prescient awareness.",
    meaning:"Long-range strategy and this week's tasks exist simultaneously. The senior leader holds both frames at once. The Friday brief handles the near frame ‚Äî but every decision in it should be legible from the long-frame perspective. Does this week's work serve the ten-thousand-year goal?" },
  { q:"I must not fear.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"The opening words of the Litany Against Fear. The shortened form is used as a personal mantra throughout the novel.",
    meaning:"Sometimes the whole litany is too long. Three words are enough to interrupt a fear loop and return to the work. Name the thing that is making you hesitate. Then move." },
  { q:"The spice must flow.",
    attr:"Guild Navigator", book:"Dune (1965)", loc:"An axiom that runs through the entire novel and series. The Spacing Guild's non-negotiable requirement ‚Äî without melange, interstellar travel stops and civilization collapses.",
    meaning:"Every organization has a spice ‚Äî the one thing that, if it stops flowing, everything else stops too. Know what yours is. Protect it. Every blocker in the Friday brief should be evaluated by whether it threatens the spice." },
  { q:"To accept a little death is to accept change. Change is the spice of life.",
    attr:"Bene Gesserit Teaching", book:"Dune Messiah (1969)", loc:"A Bene Gesserit aphorism on change and adaptation, referenced during the philosophical debates between Paul and his Truthsayer Hayt.",
    meaning:"Every deprecation, every refactor, every pivot is a little death ‚Äî the end of something that was working. Accept it. Mourn it briefly. Then build what comes next. Resistance to change is resistance to the spice of your organization's life." },
  { q:"There is probably no more terrible instant of enlightenment than the one in which you discover your father is a man ‚Äî with human flesh.",
    attr:"Paul Atreides ‚Äî Muad'Dib", book:"Dune (1965)", loc:"Book One. Paul's reflection after witnessing his father Duke Leto make decisions with all-too-human fear and hope.",
    meaning:"The moment you realize your most admired leader is figuring it out as they go is not a loss ‚Äî it's the beginning of real collaboration. Everyone is human flesh. The Friday brief works better when no one is performing certainty they don't have." },
  { q:"Knowing where the trap is ‚Äî that's the first step in evading it.",
    attr:"Duke Leto Atreides", book:"Dune (1965)", loc:"Book One. Duke Leto to his advisors upon learning of the trap being laid for House Atreides on Arrakis.",
    meaning:"Blockers left unnamed are traps you've already fallen into. Write them down. The act of naming a blocker in the Friday brief begins the process of routing around it. Unseen traps are the ones that actually stop you." },
  { q:"The Fremen were supreme in that quality the ancients called 'spannungsbogen' ‚Äî which we translate as 'the ability to wait for the right moment to act.'",
    attr:"Princess Irulan ‚Äî Introduction to A Study of the Fremen", book:"Dune (1965)", loc:"Epigraph. One of Princess Irulan's academic texts used as a chapter opening, introducing the concept of patient readiness.",
    meaning:"Not every opportunity should be taken at the moment it appears. Some partnerships, some markets, some technical approaches need time to mature before your entry creates maximum value. Know when to wait. Know when to strike. The discipline is in telling them apart." },
  { q:"The Sardaukar were disciplined fighters, yes ‚Äî but they had no passionate belief in anything. They were mercenaries of the Empire.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book Three. Paul compares the Fremen to the Emperor's elite troops, identifying belief as the force multiplier that makes the Fremen more dangerous.",
    meaning:"The team that believes in what they're building outperforms the team working for pure compensation every time. Mercenaries ship features. Believers build products. The difference is in the Friday brief ‚Äî one has energy, the other has tasks." },
  { q:"Mood's a thing for cattle and loveplay, not fighting.",
    attr:"Gurney Halleck", book:"Dune (1965)", loc:"Book One. Gurney trains Paul in the art of combat, insisting that professional execution is independent of emotional state.",
    meaning:"You will have Fridays when you don't want to write the brief. Write it anyway. Professional communication is not contingent on feeling ready to communicate. The brief serves the team regardless of the mood of its author." },
  { q:"The power to destroy a thing is the absolute control over it.",
    attr:"Paul Atreides", book:"Dune (1965)", loc:"Book Two. Paul articulates the nature of leverage ‚Äî that the threat of destruction is more powerful than destruction itself.",
    meaning:"In negotiation, in architecture decisions, in vendor relationships ‚Äî the power to walk away is more valuable than the decision to stay. Know your exits. Know what you can deprecate, what you can replace, what you can rebuild. That knowledge is leverage." },
  { q:"You cannot avoid the interplay of politics within an orthodox religion. This power struggle permeates the training, educating and disciplining of the orthodox.",
    attr:"Collected Sayings of Muad'Dib", book:"Dune (1965)", loc:"Appendix II. Herbert's own commentary on the inevitable intersection of power and institutional belief systems.",
    meaning:"Every organization has politics. Pretending otherwise is naive. The Friday brief is a transparency tool that reduces the surface area for harmful politics by keeping everyone's priorities and blockers visible to everyone else." },
  { q:"I see the long path of my descendants stretching into the future. I know it will be a path of pain and suffering, but it is necessary.",
    attr:"Leto Atreides II", book:"Children of Dune (1976)", loc:"Late chapters. Leto commits to the Golden Path ‚Äî a course of action that will cause millennia of suffering to guarantee humanity's long-term survival.",
    meaning:"Some decisions optimize for now at the cost of later. Some optimize for later at the cost of now. The best teams are explicit about which they're making and why. The Friday brief should make this tradeoff legible, not hide it." },
  { q:"We must be willing to get rid of the life we've planned so as to have the life that is waiting for us.",
    attr:"Bene Gesserit Teaching ‚Äî attributed to pre-Butlerian sources", book:"Heretics of Dune (1984)", loc:"Epigraph. A principle the Bene Gesserit adapted from pre-Jihad philosophical texts, used to guide Sisters through major life transitions.",
    meaning:"Attachment to the original roadmap is one of the most expensive things a product team can carry. The Friday brief, honestly read over time, will show you when the planned life of the product needs to be abandoned for the life that the market is asking for." },
  { q:"Prosperity is not found in comfort.",
    attr:"Duncan Idaho ‚Äî Ghola", book:"Heretics of Dune (1984)", loc:"Miles Teg speaks to the restored Duncan Idaho ghola during training, pushing him beyond his comfort thresholds.",
    meaning:"The comfortable sprint is the most expensive sprint. Technical skills atrophy, market awareness drifts, competitive positioning softens. Prosperity ‚Äî for engineers and companies alike ‚Äî is found in the deliberate embrace of difficulty." },
  { q:"The universe is God's. It is one thing, one unity glowing with a Holy Fire.",
    attr:"Orange Catholic Bible", book:"Dune (1965)", loc:"Epigraph. A fragment of in-universe scripture used to open one of the early chapters, connecting the spiritual and material.",
    meaning:"Your stack is one system. Your company is one system. The sensor that drops frames affects the compute that processes them that affects the demo that affects the sale that affects the runway. See the unity. Debug from the whole." },
  { q:"Beginnings are such delicate times.",
    attr:"Princess Irulan ‚Äî Introduction to A Child's History of Muad'Dib", book:"Dune (1965)", loc:"The opening words of the novel's prologue, establishing the narrative frame and the weight of what is beginning.",
    meaning:"Week one of a new project, a new hire's first Friday brief, the first issue of a new communication cadence ‚Äî these are delicate moments. The tone you set in the first few iterations becomes the norm. Be deliberate. Beginnings are remembered." },
  { q:"In politics, the tripod is the most unstable of structures.",
    attr:"The Bene Gesserit Commentary", book:"God Emperor of Dune (1981)", loc:"Leto's journals reference this principle when analyzing the three-way power struggle between himself, the Bene Gesserit, and the Spacing Guild.",
    meaning:"Three-party decision-making is inherently unstable. If your project has three stakeholders with equal weight and no tiebreaker, you have a governance problem. Name it. Assign a final decision-maker. The most efficient structures have clear ownership." },
  { q:"We are not here to change each other. We are here to understand each other.",
    attr:"Reverend Mother Odrade", book:"Chapterhouse: Dune (1985)", loc:"Odrade during a pivotal meeting with the Honored Matre Supreme, Murbella ‚Äî one of the novel's central confrontations.",
    meaning:"The Friday brief is not a persuasion tool. It's a shared reality tool. Its job is to give every reader the same accurate picture of where the project stands. When people read the same brief and still disagree on next steps, that's a healthy conversation. When they disagree on the facts, you have a problem the brief should fix." },
  { q:"A great man doesn't seek to lead ‚Äî he is called to it. And he answers.",
    attr:"Stilgar", book:"Dune (1965)", loc:"Stilgar observing Paul among the Fremen, beginning to believe in Paul's identity as the Lisan al-Gaib prophesied leader.",
    meaning:"The best technical leaders don't accumulate authority by seeking it. They accumulate credibility by shipping reliably, communicating honestly, and helping others succeed. Leadership follows from that. It cannot be taken; it is given." },
  { q:"The only thing worse than failure is the persistence of a wrong assumption.",
    attr:"Bene Gesserit Maxim", book:"Heretics of Dune (1984)", loc:"A principle of Bene Gesserit epistemology cited during Taraza's strategic planning sessions regarding the Honored Matre threat.",
    meaning:"Failed experiments are valuable. Failed experiments you've convinced yourself succeeded are catastrophic. The Friday brief should be a place where wrong assumptions surface and die, not a place where they get dressed up as progress." },
  { q:"You have to take your world with you and make it real. You have to build it where you stand.",
    attr:"Reverend Mother Odrade", book:"Chapterhouse: Dune (1985)", loc:"Late chapters. Odrade, facing the imminent destruction of Chapterhouse, instructs her followers on how to carry their civilization forward in the Scattering.",
    meaning:"You don't need perfect conditions to build something meaningful. You have the team in front of you, the customers you have, the tools available. Build it where you stand. The Friday brief is the record of what you built this week with what you had." },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// THEMES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// To add a new theme:
//   1. Add a CSS block: [data-theme="yourId"] { --t-bg: ...; --t-accent1: ...; etc. }
//   2. Add an entry here with id, name, dot gradient, and description
//   3. That's it ‚Äî badge color, picker swatch, and archive badge all derive automatically
//
// Special themes (like 'void') can also add extra CSS and JS effects below the token block.
// The 'siteTheme' global persists via localStorage ‚Äî theme survives page refresh.
const THEMES = [
  { id: 'default', name: 'Polymath',       dot: 'linear-gradient(135deg,#5138ee,#d1ee78)',        desc: '#5138ee ¬∑ #0a071b ¬∑ #d1ee78' },
  { id: 'crimson', name: 'Crimson Tide',   dot: 'linear-gradient(135deg,#e0143c,#ffcc00)',        desc: 'Red ¬∑ Gold ¬∑ Orange' },
  { id: 'void',    name: 'Chris',         dot: 'linear-gradient(135deg,#20c020,#4eff4e)',        desc: 'Vault-Tec Terminal ¬∑ Fallout Green' },
  { id: 'desert',  name: 'Desert Storm',   dot: 'linear-gradient(135deg,#e8a020,#f5c842)',        desc: 'Spice ¬∑ Sand ¬∑ Amber' },
  { id: 'poison',  name: 'Poison Garden',  dot: 'linear-gradient(135deg,#00e060,#c8ff00)',        desc: 'Toxic ¬∑ Acid ¬∑ Teal' },
  { id: 'iron',    name: 'Iron Cathedral', dot: 'linear-gradient(135deg,#c0c0c0,#cc4400)',        desc: 'Steel ¬∑ Rust ¬∑ White' },
  { id: 'violet',  name: 'Deep Violet',    dot: 'linear-gradient(135deg,#c040ff,#ff40c0)',        desc: 'Ultraviolet ¬∑ Magenta' },
];

// Badge colours for archive ‚Äî derived from the first color of each theme's dot gradient
// To update: change the dot gradient in THEMES above and this updates automatically
function getThemeBadgeColor(themeId) {
  const theme = THEMES.find(t => t.id === themeId) || THEMES[0];
  // Extract first colour from the dot gradient string "linear-gradient(135deg,#hex,#hex)"
  const match = theme.dot.match(/#[0-9a-fA-F]{6}/);
  const color = match ? match[0] : '#5138ee';
  // Convert hex to rgba for background tint
  const r = parseInt(color.slice(1,3),16);
  const g = parseInt(color.slice(3,5),16);
  const b = parseInt(color.slice(5,7),16);
  return { color, bg: `rgba(${r},${g},${b},0.13)` };
}

function applyTheme(themeId) {
  const id = THEMES.find(t => t.id === themeId) ? themeId : 'default';
  if (id === 'default') {
    document.documentElement.removeAttribute('data-theme');
  } else {
    document.documentElement.setAttribute('data-theme', id);
  }

  // Terminal boot sequence for Chris's Fallout theme
  if (id === 'void') {
    runTerminalBoot();
  } else {
    clearTerminalBoot();
  }
}

let _terminalBootActive = false;

function clearTerminalBoot() {
  _terminalBootActive = false;
  const existing = document.getElementById('terminal-boot-overlay');
  if (existing) existing.remove();
}

function runTerminalBoot() {
  // Don't re-run if already showing
  if (document.getElementById('terminal-boot-overlay')) return;
  _terminalBootActive = true;

  const overlay = document.createElement('div');
  overlay.id = 'terminal-boot-overlay';
  overlay.style.cssText = `
    position:fixed; inset:0; background:#000; z-index:99999;
    font-family:'VT323',monospace; font-size:1.1rem;
    color:#20c020; padding:2.5rem 3rem;
    display:flex; flex-direction:column; justify-content:flex-start;
    overflow:hidden; letter-spacing:0.08em; line-height:1.8;
    text-shadow: 0 0 8px rgba(32,192,32,0.7);
  `;
  document.body.appendChild(overlay);

  const lines = [
    'ROBCO INDUSTRIES (TM) TERMLINK PROTOCOL',
    'ENTER PASSWORD NOW',
    '',
    '> CONNECTION ESTABLISHED',
    '> LOADING FRIDAY BRIEF PROTOCOL v3.7...',
    '> AUTHENTICATING USER: CHRIS',
    '> ACCESS GRANTED',
    '',
    '> DECRYPTING WEEKLY INTELLIGENCE PACKAGE...',
    '> ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%',
    '',
    '> TRANSMISSION READY.',
    '> INITIATING DISPLAY...',
    '',
  ];

  let lineIdx = 0;
  let charIdx = 0;
  let currentEl = null;

  function nextChar() {
    if (!_terminalBootActive) { overlay.remove(); return; }

    if (lineIdx >= lines.length) {
      // Done ‚Äî fade out overlay
      overlay.style.transition = 'opacity 0.4s ease';
      overlay.style.opacity = '0';
      setTimeout(() => { if (overlay.parentNode) overlay.remove(); }, 450);
      return;
    }

    const line = lines[lineIdx];

    if (charIdx === 0) {
      currentEl = document.createElement('div');
      overlay.appendChild(currentEl);
      // Auto-scroll to bottom
      overlay.scrollTop = overlay.scrollHeight;
    }

    if (line === '') {
      // Empty line ‚Äî just advance
      lineIdx++; charIdx = 0;
      setTimeout(nextChar, 60);
      return;
    }

    currentEl.textContent = line.slice(0, charIdx + 1);
    charIdx++;

    if (charIdx >= line.length) {
      lineIdx++; charIdx = 0;
      // Pause between lines ‚Äî longer for dramatic lines
      const pause = line.startsWith('>') ? 120 : 80;
      setTimeout(nextChar, pause);
    } else {
      // Speed: faster for filler, slower for key lines
      const speed = line.includes('‚ñà‚ñà‚ñà‚ñà') ? 18 : line.startsWith('>') ? 28 : 22;
      setTimeout(nextChar, speed);
    }
  }

  nextChar();
}

function renderThemePicker(selectedId) {
  const container = document.getElementById('theme-swatches');
  if (!container) return;
  container.innerHTML = THEMES.map(t => `
    <div class="theme-swatch${(selectedId||'default') === t.id ? ' active' : ''}"
         onclick="pickTheme('${t.id}')"
         title="${t.desc}">
      <span class="swatch-dot" style="background:${t.dot}"></span>
      ${t.name}
    </div>`).join('');
}

function pickTheme(id) {
  siteTheme = id;
  draft.theme = id;   // also stamp on draft so published issue remembers its theme for the archive badge
  applyTheme(id);
  renderThemePicker(id);
  save();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

let issues = [];
let draft  = {};
let siteTheme = 'default';  // global ‚Äî persists independently of issues/draft

function save() {
  localStorage.setItem('friday_brief_v2', JSON.stringify({ issues, draft, siteTheme }));
}
function load() {
  try {
    const r = localStorage.getItem('friday_brief_v2');
    if (r) {
      const d = JSON.parse(r);
      issues    = d.issues    || [];
      draft     = d.draft     || {};
      siteTheme = d.siteTheme || 'default';
    }
  } catch(e) {}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function switchMode(m) {
  ['read','compose','archive'].forEach(x => {
    document.getElementById('view-'+x).style.display = x===m?'block':'none';
    document.getElementById('tab-'+x).classList.toggle('active', x===m);
  });
  applyTheme(siteTheme);   // always apply the current site theme on any tab switch
  if (m==='read')    { renderRead(); }
  if (m==='compose') { renderCompose(); }
  if (m==='archive') { renderArchive(); }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// READ
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderRead(iss) {
  const d = iss || issues[0];
  const empty = document.getElementById('read-empty');
  const body  = document.getElementById('read-body');
  if (!d) { empty.style.display='block'; body.innerHTML=''; updateMastheadEmpty(); return; }
  empty.style.display = 'none';
  updateMasthead(d);
  body.innerHTML = buildRead(d);
}

function updateMasthead(d) {
  document.getElementById('mast-issue').textContent  = `Issue ${String(d.num).padStart(2,'0')}`;
  document.getElementById('mast-week').textContent   = d.week||'‚Äî';
  document.getElementById('mast-author').textContent = `By ${d.author||'‚Äî'}`;
  document.getElementById('mast-status').textContent = 'TRANSMITTED';
  document.getElementById('meta-live').textContent   = `ISSUE ${d.num} LIVE`;
}

function updateMastheadEmpty() {
  document.getElementById('mast-issue').textContent  = 'Issue ‚Äî';
  document.getElementById('mast-week').textContent   = 'Week of ‚Äî';
  document.getElementById('mast-author').textContent = 'By ‚Äî';
  document.getElementById('mast-status').textContent = 'NO ISSUE TRANSMITTED';
  document.getElementById('meta-live').textContent   = 'AWAITING TRANSMISSION';
}

function buildRead(d) {
  return `
  <div>
    <div class="issue-hero">
      <div class="issue-glyph">${String(d.num).padStart(2,'0')}</div>
      <div>
        <div class="issue-label">Friday Transmission ¬∑ Issue ${d.num}</div>
        <div class="issue-week">${esc(d.week||'')}</div>
        ${d.pulse?`<div class="issue-pulse">"${esc(d.pulse)}"</div>`:''}
      </div>
      <div class="issue-right">
        <div class="issue-author-label">Transmitted by</div>
        <div class="issue-author-name">${esc(d.author||'‚Äî')}</div>
        <div class="issue-date">${new Date(d.ts).toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'})}</div>
      </div>
    </div>

    ${buildDuneBlock()}

    ${buildDivBlock('‚óÜ','C-Suite','stripe-spice','dn-spice',
      [ {label:'This Week in Brief', cls:'cl-brief', items: d.csuite?.brief, bt:'b-spice', isBlocked:false},
        {label:'Needs Decision / Awareness', cls:'cl-dec', items: d.csuite?.dec, bt:'b-org', isBlocked:true} ],
      true )}

    ${buildDivBlock('‚óà','Sales','stripe-org','dn-org',
      [ {label:'Wins & Closed',   cls:'cl-shipped', items: d.sales?.win,  bt:'b-grn',  isBlocked:false},
        {label:'Blocked',         cls:'cl-blocked', items: d.sales?.blk,  bt:'b-org',  isBlocked:true},
        {label:'Next Week',       cls:'cl-next',    items: d.sales?.nxt,  bt:'b-pur',  isBlocked:false} ] )}

    ${buildDivBlock('‚¨°','Project Management','stripe-pur','dn-pur',
      [ {label:'Shipped / Milestones', cls:'cl-shipped', items: d.pm?.ship, bt:'b-grn', isBlocked:false},
        {label:'Blocked / At Risk',    cls:'cl-blocked', items: d.pm?.blk,  bt:'b-org', isBlocked:true},
        {label:'Next Week Focus',      cls:'cl-next',    items: d.pm?.nxt,  bt:'b-pur', isBlocked:false} ] )}

    ${buildDivBlock('‚¨¢','Engineering','stripe-grn','dn-grn',
      [ {label:'Shipped This Week', cls:'cl-shipped', items: d.eng?.ship, bt:'b-grn', isBlocked:false},
        {label:'Blocked',           cls:'cl-blocked', items: d.eng?.blk,  bt:'b-org', isBlocked:true},
        {label:'Next Week',         cls:'cl-next',    items: d.eng?.nxt,  bt:'b-pur', isBlocked:false} ] )}

    ${buildShoutsBlock(d.shouts)}
    ${buildQBlock(d.qs)}
  </div>`;
}

function buildDivBlock(icon, name, stripeClass, nameClass, cols, twoCol=false) {
  const cells = cols.map(c => {
    const content = c.isBlocked
      ? ((c.items||[]).length ? c.items.map(t=>`<div class="blocked-pill"><div class="blocked-text">${esc(t)}</div></div>`).join('') : `<div class="none-label">NONE</div>`)
      : ((c.items||[]).length ? `<div class="item-list">${c.items.map(t=>`<div class="row-item"><span class="row-bullet ${c.bt}">‚ñ∏</span><span class="row-text">${esc(t)}</span></div>`).join('')}</div>` : `<div class="none-label">NONE THIS WEEK</div>`);
    return `<div class="div-cell"><div class="cell-label ${c.cls}">${c.label}</div>${content}</div>`;
  }).join('');

  return `
    <div class="div-header">
      <div class="div-stripe ${stripeClass}"></div>
      <div class="div-name ${nameClass}">${icon} ${name}</div>
      <div class="div-rule"></div>
    </div>
    <div class="div-grid${twoCol?' two-col':''}">${cells}</div>`;
}

function buildShoutsBlock(shouts) {
  const cards = (shouts||[]).length
    ? shouts.map(s=>`<div class="shout-card"><div class="shout-who">${esc(s.who||'...')}</div><div class="shout-what">${esc(s.what||'')}</div></div>`).join('')
    : `<div class="shout-card"><div class="shout-who">NONE THIS WEEK</div></div>`;
  return `
    <div class="div-header">
      <div class="div-stripe stripe-sand"></div>
      <div class="div-name dn-sand">‚òÖ Shoutouts</div>
      <div class="div-rule"></div>
    </div>
    <div class="shouts-grid">${cards}</div>`;
}

function buildQBlock(qs) {
  const cells = (qs||[]).length
    ? qs.map((q,i)=>`<div class="q-cell"><span class="q-n">${i+1}.</span><span class="q-text">${esc(q)}</span></div>`).join('')
    : `<div class="q-cell"><span class="q-text" style="color:var(--t-text3);font-style:italic">No open questions ‚Äî see you Monday.</span></div>`;
  return `
    <div class="div-header">
      <div class="div-stripe stripe-pur"></div>
      <div class="div-name dn-pur">? Open Questions for Monday</div>
      <div class="div-rule"></div>
    </div>
    <div class="q-grid">${cells}</div>`;
}

function buildDuneBlock() {
  // Reference-accurate front-facing sandworm:
  // - Massive cylinder body rising from sand, curving left like a cobra
  // - Tulip-split mouth: two fleshy lips peeling apart top/bottom
  // - Dense radial spines INSIDE pointing inward toward pure black void
  // - 4 concentric ring layers inside mouth
  // - Deep horizontal body grooves, warm tan/gold palette
  // - Tiny human figure at base for scale
  const parts = [
    '<svg class="dune-worm" viewBox="0 0 200 250" fill="none" xmlns="http://www.w3.org/2000/svg">',
    '<defs>',
    // Body ‚Äî lit from left-center, dark on sides
    '<linearGradient id="bd" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#1a0e04"/><stop offset="22%" stop-color="#6a4818"/><stop offset="50%" stop-color="#c8a050"/><stop offset="78%" stop-color="#7a5820"/><stop offset="100%" stop-color="#2a1808"/></linearGradient>',
    // Lip ‚Äî warm gold fading to dark inside
    '<linearGradient id="lp" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#d4a858"/><stop offset="50%" stop-color="#9a7030"/><stop offset="100%" stop-color="#3a1e08"/></linearGradient>',
    // Mouth rings
    '<radialGradient id="mr1" cx="50%" cy="48%" r="50%"><stop offset="0%" stop-color="#180800"/><stop offset="100%" stop-color="#4a2010"/></radialGradient>',
    '<radialGradient id="mr2" cx="50%" cy="48%" r="50%"><stop offset="0%" stop-color="#100600"/><stop offset="100%" stop-color="#2e1408"/></radialGradient>',
    '<radialGradient id="mr3" cx="50%" cy="48%" r="50%"><stop offset="0%" stop-color="#000000"/><stop offset="100%" stop-color="#180800"/></radialGradient>',
    // Sand
    '<radialGradient id="sd" cx="50%" cy="0%" r="70%"><stop offset="0%" stop-color="#e8d098" stop-opacity="0.7"/><stop offset="100%" stop-color="#c8a050" stop-opacity="0"/></radialGradient>',
    '</defs>',

    // ‚îÄ‚îÄ SAND BASE ‚îÄ‚îÄ
    '<ellipse cx="100" cy="235" rx="95" ry="15" fill="url(#sd)"/>',
    '<ellipse cx="100" cy="240" rx="75" ry="9" fill="#d4b060" opacity="0.2"/>',
    // Sand spray arcs
    '<path d="M65 220 Q30 222 5 232" stroke="#e0c878" stroke-width="3" fill="none" opacity="0.22"/>',
    '<path d="M70 224 Q40 228 15 236" stroke="#d4a840" stroke-width="2" fill="none" opacity="0.18"/>',
    '<path d="M135 220 Q170 222 195 232" stroke="#e0c878" stroke-width="3" fill="none" opacity="0.22"/>',
    '<path d="M130 224 Q160 228 185 236" stroke="#d4a840" stroke-width="2" fill="none" opacity="0.18"/>',
    // Sand cloud puffs
    '<ellipse cx="32" cy="228" rx="24" ry="7" fill="#ede0a8" opacity="0.28"/>',
    '<ellipse cx="168" cy="228" rx="24" ry="7" fill="#ede0a8" opacity="0.28"/>',
    '<ellipse cx="62" cy="222" rx="16" ry="5" fill="#f0e4b0" opacity="0.22"/>',
    '<ellipse cx="138" cy="222" rx="16" ry="5" fill="#f0e4b0" opacity="0.22"/>',

    // ‚îÄ‚îÄ TINY HUMAN FIGURE ‚îÄ‚îÄ
    // Robed figure with arms raised, very small at base
    '<path d="M100 232 Q98 224 100 218 Q102 224 100 232Z" fill="#4a3818" opacity="0.9"/>',  // robe
    '<line x1="100" y1="223" x2="95" y2="218" stroke="#4a3818" stroke-width="1.2"/>',       // left arm
    '<line x1="100" y1="223" x2="105" y2="218" stroke="#4a3818" stroke-width="1.2"/>',      // right arm
    '<circle cx="100" cy="216" r="2.2" fill="#5a4020"/>',                                     // head

    // ‚îÄ‚îÄ WORM BODY ‚Äî thick cylinder, curves left as it rises ‚îÄ‚îÄ
    // The body emerges from sand and curves slightly, tapering as it arcs away
    // Left edge of body
    '<path d="M58 232 C56 215 50 195 46 172 C42 150 42 128 46 108 C50 90 56 76 64 66" stroke="none" fill="none"/>',
    // Right edge of body
    '<path d="M142 232 C144 215 150 195 154 172 C158 150 158 128 154 108 C150 90 144 76 136 66" stroke="none" fill="none"/>',
    // Full body fill with lighting gradient
    '<path d="M58 232 C56 215 50 195 46 172 C42 150 42 128 46 108 C50 90 56 76 64 66 L136 66 C144 76 150 90 154 108 C158 128 158 150 154 172 C150 195 144 215 142 232 Z" fill="url(#bd)"/>',

    // ‚îÄ‚îÄ BODY SEGMENT GROOVES ‚Äî deep horizontal rings, very pronounced ‚îÄ‚îÄ
    // These wrap around the cylinder, elliptical in perspective
    '<path d="M59 218 Q100 212 141 218" stroke="#3a2208" stroke-width="2.5" fill="none" opacity="0.85"/>',
    '<path d="M57 206 Q100 200 143 206" stroke="#5a3810" stroke-width="2.2" fill="none" opacity="0.8"/>',
    '<path d="M55 194 Q100 188 145 194" stroke="#3a2208" stroke-width="2.2" fill="none" opacity="0.78"/>',
    '<path d="M54 182 Q100 176 146 182" stroke="#5a3810" stroke-width="2"   fill="none" opacity="0.75"/>',
    '<path d="M53 170 Q100 164 147 170" stroke="#3a2208" stroke-width="2"   fill="none" opacity="0.72"/>',
    '<path d="M52 158 Q100 152 148 158" stroke="#5a3810" stroke-width="1.8" fill="none" opacity="0.68"/>',
    '<path d="M51 146 Q100 140 149 146" stroke="#3a2208" stroke-width="1.8" fill="none" opacity="0.65"/>',
    '<path d="M51 134 Q100 128 149 134" stroke="#5a3810" stroke-width="1.6" fill="none" opacity="0.6"/>',
    '<path d="M52 122 Q100 116 148 122" stroke="#3a2208" stroke-width="1.6" fill="none" opacity="0.55"/>',
    '<path d="M53 110 Q100 104 147 110" stroke="#5a3810" stroke-width="1.4" fill="none" opacity="0.5"/>',
    '<path d="M55 98  Q100 93  145 98"  stroke="#3a2208" stroke-width="1.4" fill="none" opacity="0.45"/>',
    '<path d="M57 87  Q100 82  143 87"  stroke="#5a3810" stroke-width="1.2" fill="none" opacity="0.4"/>',
    '<path d="M60 77  Q100 73  140 77"  stroke="#3a2208" stroke-width="1.2" fill="none" opacity="0.35"/>',

    // Vertical crack lines between segments
    '<line x1="68"  y1="68"  x2="62"  y2="232" stroke="#2a1606" stroke-width="0.7" opacity="0.3"/>',
    '<line x1="84"  y1="67"  x2="80"  y2="232" stroke="#2a1606" stroke-width="0.5" opacity="0.2"/>',
    '<line x1="116" y1="67"  x2="120" y2="232" stroke="#2a1606" stroke-width="0.5" opacity="0.2"/>',
    '<line x1="132" y1="68"  x2="138" y2="232" stroke="#2a1606" stroke-width="0.7" opacity="0.3"/>',

    // Body highlight ridge ‚Äî light on the front-top surface
    '<path d="M78 70 Q100 65 122 70 Q100 75 78 70Z" fill="#e8c870" opacity="0.2"/>',
    '<path d="M72 95 Q100 90 128 95 Q100 99 72 95Z" fill="#d4a848" opacity="0.12"/>',
    '<path d="M70 125 Q100 120 130 125 Q100 129 70 125Z" fill="#c89838" opacity="0.08"/>',

    // ‚îÄ‚îÄ OUTER LIP ‚Äî tulip mouth peeling open ‚îÄ‚îÄ
    // The mouth opens as two large fleshy flaps ‚Äî top and bottom gap
    // Top flap curves upward and backward
    '<path d="M66 66 C58 52 54 36 58 22 C62 10 78 4 100 5 C122 4 138 10 142 22 C146 36 142 52 134 66 Z" fill="url(#lp)" stroke="#b08438" stroke-width="1.8"/>',
    // Bottom flap ‚Äî smaller, curves inward/downward
    '<path d="M66 66 C66 74 68 82 72 88 L128 88 C132 82 134 74 134 66 Z" fill="url(#lp)" stroke="#b08438" stroke-width="1.5"/>',
    // The notch gap at top ‚Äî where lips part (dark slot at very top)
    '<path d="M90 8 Q100 5 110 8 Q100 16 90 8Z" fill="#0a0400" opacity="0.6"/>',

    // Lip surface texture ‚Äî longitudinal creases
    '<path d="M76 8  Q74 30 70 58" stroke="#8a6020" stroke-width="0.9" fill="none" opacity="0.45"/>',
    '<path d="M88 5  Q87 28 84 60" stroke="#7a5018" stroke-width="0.7" fill="none" opacity="0.35"/>',
    '<path d="M100 5 Q100 28 100 62" stroke="#8a6020" stroke-width="0.7" fill="none" opacity="0.3"/>',
    '<path d="M112 5  Q113 28 116 60" stroke="#7a5018" stroke-width="0.7" fill="none" opacity="0.35"/>',
    '<path d="M124 8  Q126 30 130 58" stroke="#8a6020" stroke-width="0.9" fill="none" opacity="0.45"/>',
    // Bottom lip creases
    '<path d="M74 68 Q74 76 76 84" stroke="#7a5018" stroke-width="0.8" fill="none" opacity="0.4"/>',
    '<path d="M126 68 Q126 76 124 84" stroke="#7a5018" stroke-width="0.8" fill="none" opacity="0.4"/>',

    // Lip highlight ‚Äî light catching curved outer edge
    '<path d="M70 20 Q100 10 130 20" stroke="#f0d898" stroke-width="1.8" fill="none" opacity="0.55"/>',
    '<path d="M67 36 Q100 26 133 36" stroke="#d8b870" stroke-width="1.2" fill="none" opacity="0.4"/>',
    // Bottom lip highlight
    '<path d="M68 70 Q100 76 132 70" stroke="#d0a858" stroke-width="1" fill="none" opacity="0.4"/>',

    // ‚îÄ‚îÄ MOUTH INTERIOR ‚Äî 4 concentric rings darkening toward center ‚îÄ‚îÄ
    // Mouth opening is an upright oval, cx=100 cy=58 rx=32 ry=28
    '<ellipse cx="100" cy="58" rx="32" ry="28" fill="#6a3418" stroke="#8a4820" stroke-width="1.5"/>',  // ring 4 outer
    '<ellipse cx="100" cy="58" rx="26" ry="23" fill="url(#mr1)" stroke="#5a2c10" stroke-width="1.2"/>',// ring 3
    '<ellipse cx="100" cy="58" rx="20" ry="17" fill="url(#mr2)" stroke="#3a1a08" stroke-width="1"/>',  // ring 2
    '<ellipse cx="100" cy="58" rx="13" ry="12" fill="url(#mr3)" stroke="#200e04" stroke-width="0.8"/>',// ring 1 near void
    '<ellipse cx="100" cy="58" rx="6"  ry="5"  fill="#000000"/>',                                       // void center
  ];

  // ‚îÄ‚îÄ SPINE GENERATION ‚Äî computed precisely ‚îÄ‚îÄ
  // Primary spines: ro=32, ri=12, 28 spines

  const primarySpines = [
    '<g stroke="#9a9080" stroke-width="1.1" opacity="0.95">',
    '<line x1="100.0" y1="30.1" x2="100.0" y2="49.0"/>',
    '<line x1="107.6" y1="30.8" x2="102.4" y2="49.2"/>',
    '<line x1="114.8" y1="32.9" x2="104.8" y2="49.9"/>',
    '<line x1="121.2" y1="36.2" x2="106.9" y2="50.9"/>',
    '<line x1="126.6" y1="40.6" x2="108.6" y2="52.4"/>',
    '<line x1="130.6" y1="45.9" x2="109.9" y2="54.1"/>',
    '<line x1="133.1" y1="51.8" x2="110.7" y2="56.0"/>',
    '<line x1="134.0" y1="58.0" x2="111.0" y2="58.0"/>',
    '<line x1="133.1" y1="64.2" x2="110.7" y2="60.0"/>',
    '<line x1="130.6" y1="70.1" x2="109.9" y2="61.9"/>',
    '<line x1="126.6" y1="75.4" x2="108.6" y2="63.6"/>',
    '<line x1="121.2" y1="79.8" x2="106.9" y2="65.1"/>',
    '<line x1="114.8" y1="83.1" x2="104.8" y2="66.1"/>',
    '<line x1="107.6" y1="85.2" x2="102.4" y2="66.8"/>',
    '<line x1="100.0" y1="85.9" x2="100.0" y2="67.0"/>',
    '<line x1="92.4" y1="85.2" x2="97.6" y2="66.8"/>',
    '<line x1="85.2" y1="83.1" x2="95.2" y2="66.1"/>',
    '<line x1="78.8" y1="79.8" x2="93.1" y2="65.1"/>',
    '<line x1="73.4" y1="75.4" x2="91.4" y2="63.6"/>',
    '<line x1="69.4" y1="70.1" x2="90.1" y2="61.9"/>',
    '<line x1="66.9" y1="64.2" x2="89.3" y2="60.0"/>',
    '<line x1="66.0" y1="58.0" x2="89.0" y2="58.0"/>',
    '<line x1="66.9" y1="51.8" x2="89.3" y2="56.0"/>',
    '<line x1="69.4" y1="45.9" x2="90.1" y2="54.1"/>',
    '<line x1="73.4" y1="40.6" x2="91.4" y2="52.4"/>',
    '<line x1="78.8" y1="36.2" x2="93.1" y2="50.9"/>',
    '<line x1="85.2" y1="32.9" x2="95.2" y2="49.9"/>',
    '<line x1="92.4" y1="30.8" x2="97.6" y2="49.2"/>',
    '</g>',
  ];
  const secondarySpines = [
    '<g stroke="#6a6050" stroke-width="0.7" opacity="0.75">',
    '<line x1="103.6" y1="31.9" x2="101.6" y2="46.6"/>',
    '<line x1="110.6" y1="33.2" x2="104.6" y2="47.2"/>',
    '<line x1="117.0" y1="35.8" x2="107.4" y2="48.3"/>',
    '<line x1="122.6" y1="39.4" x2="109.9" y2="49.9"/>',
    '<line x1="127.1" y1="44.0" x2="111.9" y2="51.9"/>',
    '<line x1="130.2" y1="49.3" x2="113.2" y2="54.2"/>',
    '<line x1="131.8" y1="55.1" x2="113.9" y2="56.7"/>',
    '<line x1="131.8" y1="60.9" x2="113.9" y2="59.3"/>',
    '<line x1="130.2" y1="66.7" x2="113.2" y2="61.8"/>',
    '<line x1="127.1" y1="72.0" x2="111.9" y2="64.1"/>',
    '<line x1="122.6" y1="76.6" x2="109.9" y2="66.1"/>',
    '<line x1="117.0" y1="80.2" x2="107.4" y2="67.7"/>',
    '<line x1="110.6" y1="82.8" x2="104.6" y2="68.8"/>',
    '<line x1="103.6" y1="84.1" x2="101.6" y2="69.4"/>',
    '<line x1="96.4" y1="84.1" x2="98.4" y2="69.4"/>',
    '<line x1="89.4" y1="82.8" x2="95.4" y2="68.8"/>',
    '<line x1="83.0" y1="80.2" x2="92.6" y2="67.7"/>',
    '<line x1="77.4" y1="76.6" x2="90.1" y2="66.1"/>',
    '<line x1="72.9" y1="72.0" x2="88.1" y2="64.1"/>',
    '<line x1="69.8" y1="66.7" x2="86.8" y2="61.8"/>',
    '<line x1="68.2" y1="60.9" x2="86.1" y2="59.3"/>',
    '<line x1="68.2" y1="55.1" x2="86.1" y2="56.7"/>',
    '<line x1="69.8" y1="49.3" x2="86.8" y2="54.2"/>',
    '<line x1="72.9" y1="44.0" x2="88.1" y2="51.9"/>',
    '<line x1="77.4" y1="39.4" x2="90.1" y2="49.9"/>',
    '<line x1="83.0" y1="35.8" x2="92.6" y2="48.3"/>',
    '<line x1="89.4" y1="33.2" x2="95.4" y2="47.2"/>',
    '<line x1="96.4" y1="31.9" x2="98.4" y2="46.6"/>',
    '</g>',
  ];
  const tertiarySpines = [
    '<g stroke="#4a4038" stroke-width="0.5" opacity="0.55">',
    '<line x1="104.8" y1="33.7" x2="102.6" y2="45.0"/>',
    '<line x1="111.3" y1="35.2" x2="106.0" y2="45.8"/>',
    '<line x1="117.2" y1="37.8" x2="109.2" y2="47.2"/>',
    '<line x1="122.2" y1="41.5" x2="111.8" y2="49.2"/>',
    '<line x1="126.1" y1="45.9" x2="113.9" y2="51.6"/>',
    '<line x1="128.8" y1="51.0" x2="115.3" y2="54.3"/>',
    '<line x1="129.9" y1="56.4" x2="116.0" y2="57.2"/>',
    '<line x1="129.6" y1="61.9" x2="115.8" y2="60.1"/>',
    '<line x1="127.8" y1="67.2" x2="114.8" y2="62.9"/>',
    '<line x1="124.6" y1="72.1" x2="113.1" y2="65.5"/>',
    '<line x1="120.2" y1="76.2" x2="110.8" y2="67.7"/>',
    '<line x1="114.7" y1="79.4" x2="107.9" y2="69.4"/>',
    '<line x1="108.5" y1="81.6" x2="104.6" y2="70.6"/>',
    '<line x1="101.9" y1="82.5" x2="101.0" y2="71.1"/>',
    '<line x1="95.2" y1="82.3" x2="97.4" y2="71.0"/>',
    '<line x1="88.7" y1="80.8" x2="94.0" y2="70.2"/>',
    '<line x1="82.8" y1="78.2" x2="90.8" y2="68.8"/>',
    '<line x1="77.8" y1="74.5" x2="88.2" y2="66.8"/>',
    '<line x1="73.9" y1="70.1" x2="86.1" y2="64.4"/>',
    '<line x1="71.2" y1="65.0" x2="84.7" y2="61.7"/>',
    '<line x1="70.1" y1="59.6" x2="84.0" y2="58.8"/>',
    '<line x1="70.4" y1="54.1" x2="84.2" y2="55.9"/>',
    '<line x1="72.2" y1="48.8" x2="85.2" y2="53.1"/>',
    '<line x1="75.4" y1="43.9" x2="86.9" y2="50.5"/>',
    '<line x1="79.8" y1="39.8" x2="89.2" y2="48.3"/>',
    '<line x1="85.3" y1="36.6" x2="92.1" y2="46.6"/>',
    '<line x1="91.5" y1="34.4" x2="95.4" y2="45.4"/>',
    '<line x1="98.1" y1="33.5" x2="99.0" y2="44.9"/>',
    '</g>',
  ];
  const spineDots = [
    '<g fill="#b0a898" opacity="0.85">',
    '<circle cx="100.0" cy="30.1" r="1.0"/>',
    '<circle cx="107.6" cy="30.8" r="1.0"/>',
    '<circle cx="114.8" cy="32.9" r="1.0"/>',
    '<circle cx="121.2" cy="36.2" r="1.0"/>',
    '<circle cx="126.6" cy="40.6" r="1.0"/>',
    '<circle cx="130.6" cy="45.9" r="1.0"/>',
    '<circle cx="133.1" cy="51.8" r="1.0"/>',
    '<circle cx="134.0" cy="58.0" r="1.0"/>',
    '<circle cx="133.1" cy="64.2" r="1.0"/>',
    '<circle cx="130.6" cy="70.1" r="1.0"/>',
    '<circle cx="126.6" cy="75.4" r="1.0"/>',
    '<circle cx="121.2" cy="79.8" r="1.0"/>',
    '<circle cx="114.8" cy="83.1" r="1.0"/>',
    '<circle cx="107.6" cy="85.2" r="1.0"/>',
    '<circle cx="100.0" cy="85.9" r="1.0"/>',
    '<circle cx="92.4" cy="85.2" r="1.0"/>',
    '<circle cx="85.2" cy="83.1" r="1.0"/>',
    '<circle cx="78.8" cy="79.8" r="1.0"/>',
    '<circle cx="73.4" cy="75.4" r="1.0"/>',
    '<circle cx="69.4" cy="70.1" r="1.0"/>',
    '<circle cx="66.9" cy="64.2" r="1.0"/>',
    '<circle cx="66.0" cy="58.0" r="1.0"/>',
    '<circle cx="66.9" cy="51.8" r="1.0"/>',
    '<circle cx="69.4" cy="45.9" r="1.0"/>',
    '<circle cx="73.4" cy="40.6" r="1.0"/>',
    '<circle cx="78.8" cy="36.2" r="1.0"/>',
    '<circle cx="85.2" cy="32.9" r="1.0"/>',
    '<circle cx="92.4" cy="30.8" r="1.0"/>',
    '</g>',
  ];

  const tail = [
    // ‚îÄ‚îÄ SPICE AMBIENT GLOW ‚îÄ‚îÄ
    '<ellipse cx="100" cy="58" rx="38" ry="33" fill="#e8900a" opacity="0.03"/>',
    '</svg>',
  ];

  const svg = [...parts, ...primarySpines, ...secondarySpines, ...tertiarySpines, ...spineDots, ...tail].join('\n');

  return '<div class="dune-trigger-bar">' +
    '<div class="dune-trigger-left">' +
    '<div class="dune-worm-wrap">' + svg + '</div>' +
    '<div class="dune-trigger-label"><strong>The Spice Speaks</strong>' +
    'A quote from the Dune chronicles and what it means for your work.</div>' +
    '</div>' +
    '<button class="spice-btn" onclick="generateQuote()">Channel the Spice \u2192</button>' +
    '</div>' +
    '<div class="quote-display" id="quote-display">' +
    '<div class="quote-sand-line"></div>' +
    '<div id="quote-inner"></div>' +
    '</div>';
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DUNE QUOTE GENERATOR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let lastQuoteIdx = -1;

function generateQuote() {
  const display = document.getElementById('quote-display');
  const inner   = document.getElementById('quote-inner');
  if (!display || !inner) return;

  // Show loading
  display.classList.add('visible');
  inner.innerHTML = '<div class="quote-loading">Consulting the Orange Catholic Bible‚Ä¶</div>';

  setTimeout(() => {
    let idx;
    do { idx = Math.floor(Math.random() * DUNE_QUOTES.length); } while (idx === lastQuoteIdx && DUNE_QUOTES.length > 1);
    lastQuoteIdx = idx;
    const q = DUNE_QUOTES[idx];

    inner.innerHTML = `
      <div class="quote-source">${esc(q.book)}</div>
      <div class="quote-text">"${esc(q.q)}"</div>
      <div class="quote-attribution">${esc(q.attr)}</div>
      <div class="quote-loc">${esc(q.loc)}</div>
      <div class="quote-divider"></div>
      <div class="quote-meaning-label">What this means for your work</div>
      <div class="quote-meaning">${esc(q.meaning)}</div>`;

    // Scroll to it
    display.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  }, 600);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// COMPOSE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function addRow(listId, ph) {
  const l = document.getElementById(listId);
  const r = document.createElement('div'); r.className='edit-row';
  r.innerHTML=`<textarea placeholder="${ph}" rows="2" oninput="saveDraft();autoResize(this)"></textarea><button class="del-btn" onclick="this.parentElement.remove();saveDraft()">‚úï</button>`;
  l.appendChild(r);
  const ta = r.querySelector('textarea');
  ta.focus();
}

function autoResize(el) {
  el.style.height = 'auto';
  el.style.height = el.scrollHeight + 'px';
}

function addShout() {
  const l=document.getElementById('sh-list');
  const r=document.createElement('div'); r.className='shout-row';
  r.innerHTML=`<input type="text" placeholder="Name" oninput="saveDraft()"><input type="text" placeholder="What they did ‚Äî be specific!" oninput="saveDraft()"><button class="del-btn" onclick="this.parentElement.remove();saveDraft()">‚úï</button>`;
  l.appendChild(r); r.querySelector('input').focus();
}

function getValues(id) { return [...document.querySelectorAll(`#${id} textarea`)].map(i=>i.value.trim()).filter(Boolean); }
function getShoutValues()  { return [...document.querySelectorAll('#sh-list .shout-row')].map(r=>{const ins=r.querySelectorAll('input');return{who:ins[0]?.value.trim()||'',what:ins[1]?.value.trim()||''};}).filter(s=>s.who||s.what); }

function populateList(id, vals, ph) {
  const l=document.getElementById(id); if(!l) return; l.innerHTML='';
  (vals||[]).forEach(v=>{
    const r=document.createElement('div'); r.className='edit-row';
    r.innerHTML=`<textarea placeholder="${ph}" rows="2" oninput="saveDraft();autoResize(this)">${esc(v)}</textarea><button class="del-btn" onclick="this.parentElement.remove();saveDraft()">‚úï</button>`;
    l.appendChild(r);
    const ta = r.querySelector('textarea');
    // auto-resize after render
    requestAnimationFrame(() => autoResize(ta));
  });
}
function populateShouts(vals) {
  const list = document.getElementById('sh-list');
  if (!list) return;
  list.innerHTML = '';
  (vals || []).forEach(s => {
    const row = document.createElement('div');
    row.className = 'shout-row';
    row.innerHTML = `
      <input type="text" value="${esc(s.who||'')}"  placeholder="Name"                oninput="saveDraft()">
      <input type="text" value="${esc(s.what||'')}" placeholder="What they did"        oninput="saveDraft()">
      <button class="del-btn" onclick="this.parentElement.remove();saveDraft()">‚úï</button>`;
    list.appendChild(row);
  });
}

function saveDraft() {
  draft={
    week:document.getElementById('ef-week').value,author:document.getElementById('ef-author').value,pulse:document.getElementById('ef-pulse').value,
    theme: siteTheme,
    csuite:{brief:getValues('cs-brief-list'),dec:getValues('cs-dec-list')},
    sales:{win:getValues('sa-win-list'),blk:getValues('sa-blk-list'),nxt:getValues('sa-nxt-list')},
    pm:{ship:getValues('pm-ship-list'),blk:getValues('pm-blk-list'),nxt:getValues('pm-nxt-list')},
    eng:{ship:getValues('en-ship-list'),blk:getValues('en-blk-list'),nxt:getValues('en-nxt-list')},
    shouts:getShoutValues(), qs:getValues('q-list'),
  };
  save();
  const el=document.getElementById('autosave'); el.style.display='inline';
  clearTimeout(window._st); window._st=setTimeout(()=>el.style.display='none',2000);
}

function renderCompose() {
  document.getElementById('ef-week').value   = draft.week   || getThisWeekString();
  document.getElementById('ef-author').value = draft.author || '';
  document.getElementById('ef-pulse').value  = draft.pulse  || '';
  renderThemePicker(siteTheme);   // show current site theme as selected
  populateList('cs-brief-list',draft.csuite?.brief,'1‚Äì2 sentence summary for leadership');
  populateList('cs-dec-list',  draft.csuite?.dec, 'What does leadership need to act on?');
  populateList('sa-win-list',  draft.sales?.win,  'Deals, demos, pipeline movement‚Ä¶');
  populateList('sa-blk-list',  draft.sales?.blk,  'What needs unblocking?');
  populateList('sa-nxt-list',  draft.sales?.nxt,  'Upcoming meetings, demos, targets‚Ä¶');
  populateList('pm-ship-list', draft.pm?.ship,    'What got done or hit a milestone?');
  populateList('pm-blk-list',  draft.pm?.blk,     'What is at risk or blocked?');
  populateList('pm-nxt-list',  draft.pm?.nxt,     'Priorities for next week?');
  populateList('en-ship-list', draft.eng?.ship,   'What shipped, merged, or was validated?');
  populateList('en-blk-list',  draft.eng?.blk,    'What is technically blocked?');
  populateList('en-nxt-list',  draft.eng?.nxt,    'What are engineers focused on next week?');
  populateShouts(draft.shouts);
  populateList('q-list', draft.qs, 'A question for the team on Monday‚Ä¶');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PUBLISH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function publish() {
  saveDraft();
  if (!draft.week||!draft.author) { toast('Add a week and author first.'); return; }
  const issue={...draft, num:issues.length+1, ts:new Date().toISOString()};
  const ei=issues.findIndex(i=>i.week===draft.week);
  if (ei>=0) issues[ei]=issue; else issues.unshift(issue);
  draft={}; save();
  updateMasthead(issue);
  switchMode('read');
  toast('Transmitted. The spice flows.');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ARCHIVE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderArchive() {
  const l=document.getElementById('arc-list');
  if (!issues.length) { l.innerHTML='<div class="arc-empty">No issues transmitted yet</div>'; return; }
  l.innerHTML=issues.map(i=>{
    const prev=[...(i.csuite?.brief||[]),...(i.eng?.ship||[])][0]||'...';
    const themeId = i.theme || 'default';
    const themeObj = THEMES.find(t => t.id === themeId) || THEMES[0];
    const bc = getThemeBadgeColor(themeId);
    const badge = `<div class="arc-theme-badge" style="color:${bc.color};background:${bc.bg};border-color:${bc.color}">${themeObj.name}</div>`;
    return `<div class="arc-row" onclick="viewIssue(${i.num})">
      <div class="arc-n">${String(i.num).padStart(2,'0')}</div>
      <div class="arc-week">${esc(i.week||'...')}</div>
      <div class="arc-by">${esc(i.author||'...')}</div>
      <div class="arc-prev">${esc(prev)}</div>
      ${badge}
      <div class="arc-arr">‚Üí</div>
    </div>`;
  }).join('');
}

function viewIssue(num) {
  const i=issues.find(x=>x.num===num); if(!i) return;
  switchMode('read');
  renderRead(i);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// WEEK AUTOFILL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function getThisWeekString() {
  const now = new Date();
  // Find this Monday
  const day = now.getDay(); // 0=Sun,1=Mon...
  const diffToMon = (day === 0) ? -6 : 1 - day;
  const mon = new Date(now);
  mon.setDate(now.getDate() + diffToMon);
  const fri = new Date(mon);
  fri.setDate(mon.getDate() + 4);
  const opts = { month: 'long', day: 'numeric' };
  const monStr = mon.toLocaleDateString('en-US', opts);
  const friStr = fri.toLocaleDateString('en-US', { day: 'numeric' });
  const year   = fri.getFullYear();
  return `${monStr}‚Äì${friStr}, ${year}`;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// EXPORT MODAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openExportModal()  { document.getElementById('export-modal').classList.add('open'); }
function closeExportModal() { document.getElementById('export-modal').classList.remove('open'); }

function doExportJSON() {
  closeExportModal();
  try {
    const payload = JSON.stringify({ issues, draft }, null, 2);
    const blob = new Blob([payload], { type: 'application/json' });
    const url  = URL.createObjectURL(blob);
    const a    = document.createElement('a');
    a.href = url; a.download = 'friday-brief-backup.json';
    document.body.appendChild(a); a.click();
    document.body.removeChild(a); URL.revokeObjectURL(url);
    toast('JSON backup exported ‚Äî check your downloads.');
  } catch(e) { toast('Export failed: ' + e.message); }
}

function doExportPDF() {
  closeExportModal();
  // Inject print-specific styles temporarily, then trigger print
  const style = document.createElement('style');
  style.id = 'print-override';
  style.textContent = `
    @media print {
      body { background: #fff !important; color: #111 !important; font-size: 11pt; }
      body::before, body::after { display: none !important; }
      .ticker, .mode-bar, .dune-trigger-bar, .quote-display,
      #view-compose, #view-archive { display: none !important; }
      .masthead { background: #fff; border-bottom: 2px solid #111; padding: 1rem; }
      .paper-name { -webkit-text-fill-color: #111 !important; color: #111 !important; filter: none !important; }
      .paper-name-sub { color: #555 !important; filter: none !important; }
      .mast-right { color: #333 !important; }
      .mast-sep { background: #111 !important; filter: none !important; height: 2px; }
      .mast-meta-bar { color: #666 !important; }
      .div-name { color: #111 !important; filter: none !important; }
      .div-stripe { box-shadow: none !important; }
      .div-grid, .shouts-grid, .q-grid { background: #ddd !important; border-color: #ddd !important; }
      .div-cell, .shout-card, .q-cell { background: #fff !important; }
      .cell-label { color: #333 !important; }
      .row-text, .blocked-text, .shout-what, .q-text { color: #111 !important; }
      .row-bullet { color: #555 !important; }
      .shout-who { color: #333 !important; filter: none !important; }
      .blocked-pill { border-color: #999 !important; background: #f9f9f9 !important; }
      .none-label { color: #999 !important; }
      .issue-glyph { -webkit-text-stroke-color: #ccc !important; }
      .issue-week { color: #111 !important; filter: none !important; }
      .issue-author-name { color: #333 !important; filter: none !important; }
      .issue-pulse { color: #555 !important; }
      * { box-shadow: none !important; text-shadow: none !important; }
      @page { margin: 1.5cm; }
    }
  `;
  document.head.appendChild(style);
  window.print();
  setTimeout(() => {
    const s = document.getElementById('print-override');
    if (s) s.remove();
  }, 1000);
  toast('Opening print dialog ‚Äî save as PDF from there.');
}

function triggerImport() {
  const inp = document.createElement('input');
  inp.type = 'file';
  inp.accept = '.json';
  inp.style.display = 'none';
  document.body.appendChild(inp);
  inp.addEventListener('change', function(e) {
    const f = e.target.files[0];
    if (!f) { document.body.removeChild(inp); return; }
    const reader = new FileReader();
    reader.onload = function(ev) {
      try {
        const d = JSON.parse(ev.target.result);
        if (d.issues)    issues    = d.issues;
        if (d.draft)     draft     = d.draft;
        if (d.siteTheme) siteTheme = d.siteTheme;
        save();
        applyTheme(siteTheme);
        renderRead();
        toast(`Imported ${issues.length} issue(s) successfully.`);
      } catch(err) {
        toast('Import failed ‚Äî file may be invalid JSON.');
      }
      document.body.removeChild(inp);
    };
    reader.readAsText(f);
  });
  inp.click();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UTILS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function esc(s) { return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
function toast(msg) { const el=document.createElement('div');el.className='toast';el.textContent=msg;document.getElementById('toasts').appendChild(el);setTimeout(()=>el.remove(),3500); }

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SAMPLE DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function seedSample() {
  if (issues.length) return;

  // ‚îÄ‚îÄ DEMO ISSUE ‚Äî reflects a realistic week from a 29-person team:
  //    2 C-suite, 1 sales, 6 PMs across workstreams, 20 engineers
  //    Edit this data to reflect your actual team's week before transmitting.
  issues = [{
    num: 1,
    week: 'February 24‚Äì28, 2025',
    author: 'Marcus Webb',
    pulse: 'Biggest shipping week of the quarter. Perception stack cleared 99.2% uptime. One critical blocker on the OEM data agreement needs leadership eyes before Monday.',
    ts: new Date().toISOString(),
    theme: 'default',

    csuite: {
      brief: [
        'Autonomous perception stack hit 99.2% sensor uptime across a full 8-hour stress test ‚Äî this is the threshold we committed to investors for Q2. We are ahead of schedule.',
        'Commercial pipeline is accelerating: two LOIs expected to countersign by end of March, and a third enterprise prospect requested a site visit for April. Revenue path is cleaner than it was 60 days ago.',
        'Team morale is high. Three months of consistent Friday briefs have meaningfully improved cross-functional alignment ‚Äî eng and PM are no longer surprised by each other\'s blockers.'
      ],
      dec: [
        'OEM data-sharing agreement has stalled at their legal team for 11 days. Without signed access to the official DBC file, engineering is working from an informal CAN map with ~94% coverage. We need a decision: escalate to C-level contact at OEM, or engage outside counsel to accelerate. Recommend escalation by Monday COB.',
        'Third managed switch ($800 capex) is blocking physical port expansion for sensor R&D. Finance approval threshold is $1,500 ‚Äî this is under that. Recommend delegating approval to engineering lead to move faster.',
        'Two senior engineers have flagged interest in conference presentations (ROSCon, ICRA). Budget impact is ~$3,200 total. Decision needed on whether we fund this Q2 or defer to Q3 ‚Äî both submissions close March 15.'
      ]
    },

    sales: {
      win: [
        'Prospect A (regional logistics, 47 vehicles) ‚Äî LOI received Friday morning. Legal review starts Monday. Estimated contract value $2.1M over 24 months. Largest deal in pipeline to date.',
        'Prospect B (municipal transit authority) ‚Äî technical evaluation call completed. Their CTO called our sensor fusion approach "the most mature we\'ve seen at this stage." Moving to commercial terms discussion.',
        'Prospect C (last-mile delivery startup) ‚Äî pilot proposal accepted. Pilot scope: 3 vehicles, 90 days, $85K. SOW being drafted.',
        'Renewed contact with Prospect F (cold for 6 weeks) after publishing our uptime benchmark publicly. They requested a new demo slot ‚Äî scheduled for March 12.',
        'Inbound inquiry from international freight operator via LinkedIn ‚Äî qualified, forwarded to Chris for follow-up.'
      ],
      blk: [
        'Prospect D (enterprise fleet operator) is stalled pending an updated technical spec sheet reflecting the new sensor configuration. Engineering confirmed they can turn this around by Tuesday ‚Äî need someone to own the handoff and send it directly.',
        'Prospect E RFP requires ISO 26262 functional safety documentation we don\'t yet have. Need a scoping conversation with eng on what it would take to produce this ‚Äî is it 2 weeks or 2 months?',
        'CRM is not reflecting deals correctly after last week\'s migration. Two prospects show as "closed lost" when they are active. IT ticket open but not resolved ‚Äî affects pipeline reporting accuracy.'
      ],
      nxt: [
        'Monday: Prospect A legal kickoff call (10am). Ensure contracts@ is looped in.',
        'Tuesday: Send updated spec sheet to Prospect D the moment it arrives from eng.',
        'Wednesday: Prospect B commercial terms call. Prep comparables from Prospect A negotiation.',
        'Thursday: Prospect C pilot SOW review ‚Äî internal sign-off needed before sending.',
        'Friday: Pipeline review with leadership ‚Äî prepare updated ARR forecast reflecting LOI.',
        'Ongoing: Qualify the international inbound ‚Äî determine if they are a 2025 or 2026 opportunity before investing demo resources.'
      ]
    },

    pm: {
      ship: [
        // Perception & Sensor Platform PM
        'Perception stack v2.4.1 shipped to staging ‚Äî includes fused LiDAR + camera confidence scoring. First build to pass the 99.2% uptime threshold on the full stress test profile.',
        'Sensor calibration pipeline fully automated ‚Äî what used to take a field engineer 3 hours now runs in 18 minutes with zero manual steps. Unblocks faster vehicle turnaround for pilots.',
        'LiDAR #3 field-of-view validation complete. All three units now cover the full 270¬∞ arc with less than 0.3¬∞ gap at overlap boundaries.',
        // Infrastructure & Networking PM
        'PoE switch fully populated: 4 cameras, GNSS receiver, and 2 LiDARs all drawing clean power. No voltage sag observed under full load.',
        'Lenovo compute node dual-homed and routing correctly between sensor VLAN and operations VLAN. Latency between networks under 0.8ms.',
        'VLAN segmentation configured on SW1 and SW3. Sensor traffic, ops traffic, and management traffic now isolated. Eliminates the broadcast storm risk we flagged two weeks ago.',
        // Autonomy & Controls PM
        'Path planning module v1.9 merged ‚Äî handles intersection scenarios with static obstacles up to 30% faster than v1.8.',
        'Simulation harness expanded: 12 new edge-case scenarios added covering adverse weather, partial occlusion, and erratic pedestrian behavior.',
        // Data & ML PM
        'Training dataset expanded by 14,000 labeled frames from last month\'s field collection runs. Dataset now at 380,000 frames total.',
        'Model evaluation pipeline now runs nightly ‚Äî team gets a Slack notification with accuracy delta vs. previous checkpoint by 7am every morning.',
        // Platform & Tooling PM
        'Internal developer portal launched. Engineers can now spin up a sim environment in ~4 minutes vs. the previous ~40-minute manual setup.',
        'Dependency audit complete ‚Äî 6 packages with known CVEs identified and patched. No critical vulnerabilities remaining.',
        // Compliance & Safety PM
        'FMEA review for sensor fusion module completed. 3 medium-severity risks identified, mitigation plans drafted and reviewed with engineering leads.',
        'First draft of safety case document submitted to external reviewer. Feedback expected within 2 weeks.'
      ],
      blk: [
        'OEM DBC file still unsigned ‚Äî 94% CAN message coverage is holding up ML training accuracy for vehicle state prediction. This is the single highest-priority external blocker across all PM workstreams.',
        'SW1 and SW3 still at port capacity for R&D expansion (day-to-day operations unaffected). Third switch purchase pending finance approval ‚Äî see C-suite decisions.',
        'Simulation harness is CPU-bound on the current test server ‚Äî nightly runs taking 6.5 hours, which means results are sometimes delayed until after standup. Need either a hardware upgrade or a job scheduler conversation.',
        'ISO 26262 gap ‚Äî safety case document is a draft but we have no agreed process for what "done" looks like. Need a definition-of-done from leadership before we can scope the engineering effort accurately.',
        'Two PM workstreams (Data/ML and Compliance) are each one person deep. If either person is unavailable for more than a few days, those streams stall. This is a staffing risk, not a process risk.',
        'Developer portal relies on a manual provisioning step that only two people know how to perform. Knowledge is not documented ‚Äî bus factor of 2.'
      ],
      nxt: [
        'Perception: Begin integration testing of v2.4.1 on physical vehicle ‚Äî target 4 hours of road time Tuesday/Wednesday.',
        'Infrastructure: Document VLAN config fully before anyone touches the switches again. One undocumented change last month cost 6 hours of debugging.',
        'Autonomy: Start v2.0 path planning spec ‚Äî focus on dynamic obstacle avoidance at low speed.',
        'Data/ML: Run first nightly evaluation against new 380K-frame dataset. Establish new accuracy baseline.',
        'Tooling: Document the developer portal provisioning steps. Assign a second owner.',
        'Compliance: Scope ISO 26262 effort estimate once definition-of-done is confirmed ‚Äî need number before March 15 budget review.'
      ]
    },

    eng: {
      ship: [
        // Perception engineers (5)
        'Elena Vasquez: Merged sensor fusion confidence scoring into perception v2.4.1. Eliminated 340ms of unnecessary recomputation per frame by caching intermediate results.',
        'James Okafor: Rewrote the LiDAR point cloud downsampling algorithm ‚Äî 60% faster, same output quality. Frame processing now comfortably under the 100ms real-time budget.',
        'Priya Nair: Completed LiDAR #3 field-of-view validation script. Now runs in CI on every perception build ‚Äî no more manual range checks.',
        'Daniel Cho: Fixed the camera timestamp drift bug that was causing 15‚Äì20ms jitter in fused outputs. Root cause was NTP sync interval misconfiguration on the capture board.',
        'Fatima Al-Hassan: Shipped automated calibration pipeline. Wrote full test suite ‚Äî 47 unit tests, 100% pass rate on all hardware configs we support.',
        // Infrastructure engineers (4)
        'Sam Rivera: Configured VLAN segmentation across SW1 and SW3. Verified with Wireshark that inter-VLAN traffic is correctly gated. No broadcast leakage observed.',
        'Kenji Nakamura: Dual-homed the compute node and validated failover ‚Äî both uplinks active, sub-1ms switchover on link drop. Documented the config in the infrastructure runbook.',
        'Aisha Johnson: Completed PoE load testing. All 6 devices drawing within spec simultaneously, no sag events. Updated the power budget spreadsheet.',
        'Tom Bergstr√∂m: Set up automated switch config backups ‚Äî runs nightly, stored in the infra repo with diffs. We will never lose a switch config again.',
        // Autonomy & Controls engineers (4)
        'Rafael Moreno: Merged path planning v1.9. Key change: pre-computed cost maps for known static obstacles ‚Äî eliminates redundant A* iterations at intersections.',
        'Nina Petrov: Added 12 simulation scenarios covering weather and occlusion edge cases. 9 of 12 pass on v1.9. 3 failing scenarios are known gaps ‚Äî tickets created.',
        'Leon Fischer: Profiled the planning loop end-to-end. Found and fixed a 22ms stall caused by a blocking mutex in the obstacle subscriber. Planning loop now consistently under 80ms.',
        'Yuki Tanaka: Integrated vehicle state prediction outputs from ML into the planning module. First end-to-end test ran successfully ‚Äî prediction data flowing correctly.',
        // Data & ML engineers (4)
        'Mei Zhang: Ingested and labeled 14,000 new frames from field collection. Wrote the labeling QA script that flags inconsistent annotations ‚Äî caught 340 bad labels before they hit training.',
        'Arjun Sharma: Built the nightly model evaluation pipeline end-to-end. Runs on the training server at 11pm, posts results to Slack by 7am. Solid reliability ‚Äî zero failed runs this week.',
        'Carlos Diaz: Trained a new vehicle state prediction model on the expanded dataset. Preliminary accuracy +3.1% over previous checkpoint ‚Äî full evaluation running overnight.',
        'Ingrid Svensson: Refactored the data pipeline ‚Äî removed 3 manual steps that required engineering intervention daily. Fully automated now. Saves ~45 minutes of engineering time per day.',
        // Platform & Tooling engineers (3)
        'Patrick O\'Brien: Shipped the internal developer portal MVP. Spun up 6 test environments during the launch day ‚Äî all provisioned correctly, avg 4.1 minutes.',
        'Zara Ahmed: Completed the dependency audit. Patched all 6 CVE packages. Set up Dependabot alerts ‚Äî we will get notified within 24 hours of any new vulnerability going forward.',
        'Marco Russo: Wrote the provisioning automation script for the developer portal. Still needs one manual trigger but reduces the knowledge requirement from "know the whole system" to "run this one command."'
      ],
      blk: [
        'OEM DBC file ‚Äî Yuki\'s vehicle state prediction work and Carlos\'s model training are both running on an informal CAN map. 6% of message IDs are unconfirmed. If they change at certification, we retrain. Escalation needed.',
        'Simulation server is CPU-bound. Nightly runs take 6.5 hours. Nina and Leon\'s new scenarios push it closer to 8 hours, which will overflow into the next morning. Need either a second server or cloud burst capacity ‚Äî estimate is $200‚Äì400/month on AWS.',
        'No staging environment that mirrors production sensor hardware ‚Äî Patrick\'s portal spins up software-only environments. Integration bugs that only appear on hardware are found late. This is a known gap, not new, but worth naming.',
        'Marco\'s provisioning script still needs one manual trigger that only Patrick and Marco know. Documentation sprint needed before either of them is unavailable.',
        'Leon identified a second blocking mutex in the prediction subscriber (separate from the one he fixed this week). Not causing failures yet but will under higher message rates. Ticket created, not yet prioritized.',
        'Arjun\'s nightly pipeline runs on a single point of failure ‚Äî the training server has no failover. If it goes down overnight, we lose the morning report. Low probability, high annoyance.'
      ],
      nxt: [
        'Perception team: Physical vehicle integration test for v2.4.1 ‚Äî target Tuesday/Wednesday. Elena leading, James and Priya on hardware support.',
        'Infrastructure: Full documentation pass on VLAN config and PoE setup ‚Äî Tom owns, target Thursday.',
        'Autonomy: Start v2.0 path planner spec. Rafael drafting, Leon reviewing. Focus on dynamic obstacles at low speed.',
        'Autonomy: Fix the 3 failing simulation scenarios from this week ‚Äî Nina triaging Monday to determine if they are algorithm gaps or sim bugs.',
        'Data/ML: Finalize Carlos\'s model evaluation ‚Äî if +3.1% holds, promote to staging. Mei to run final label QA pass before promotion.',
        'Data/ML: Ingrid to document the automated pipeline ‚Äî it\'s clean but only she fully understands it right now.',
        'Tooling: Marco to finish provisioning automation so it requires zero manual steps. Patrick reviewing.',
        'Tooling: Zara to set up automated weekly CVE summary report ‚Äî proactive security posture.',
        'All teams: Review Leon\'s second mutex ticket ‚Äî assign priority before it becomes a production issue.',
        'All teams: If OEM escalation succeeds and DBC file arrives, Yuki and Carlos should be ready to rerun training immediately ‚Äî pre-stage the pipeline.'
      ]
    },

    shouts: [
      { who: 'Elena Vasquez',   what: 'The 340ms cache optimization in sensor fusion was not on anyone\'s roadmap ‚Äî she found it during a code review, scoped it in an afternoon, and shipped it in the same week. That\'s the kind of initiative that makes the whole team faster.' },
      { who: 'Fatima Al-Hassan', what: '47 unit tests for the calibration pipeline. Not because anyone asked. Because she knew it would be used by field engineers who can\'t debug Python. That\'s thinking beyond your ticket.' },
      { who: 'Tom Bergstr√∂m',   what: 'Automated switch config backups after we lost a config manually last month. Didn\'t file a ticket, didn\'t ask permission, just fixed the systemic problem. This is exactly the ownership we want.' },
      { who: 'Arjun Sharma',    what: 'The nightly eval pipeline has run every single night this week with zero failures. Quiet infrastructure that just works is underrated ‚Äî this will save hours of debugging over the next year.' },
      { who: 'Mei Zhang',       what: 'Caught 340 bad labels before they hit training. That\'s 340 ways the model could have learned something wrong. The QA script she wrote is now part of the pipeline permanently.' },
      { who: 'Marco Russo',     what: 'Took a hairy manual process that required knowing the whole system and turned it into one command. This is the kind of leverage work that compounds.' },
      { who: 'Sam Rivera',      what: 'VLAN config was on the backlog for three weeks. Sam owned it start to finish ‚Äî designed, implemented, verified, and documented it in one sprint. Zero drama, zero help requests.' }
    ],

    qs: [
      'OEM escalation: do we go C-level contact directly, or route through our account manager first? Who makes that call and by when?',
      'ISO 26262 scoping: before we can estimate the effort, we need a definition of done from leadership. Can we get 30 minutes on the calendar next week?',
      'Simulation server capacity: do we approve a second server (~$4K capex) or go cloud burst (~$300/month)? Which fits our current burn rate posture better?',
      'Conference presentations (ROSCon, ICRA): fund Q2 or defer to Q3? Submissions close March 15 ‚Äî need a decision before then.',
      'Developer portal provisioning: should we treat this as a Q1 reliability item (Marco finishes automation this sprint) or is it fine to carry as-is into Q2?',
      'With two PM workstreams one-person-deep, what\'s our contingency if one of those people is out for a week? Is there a backup plan or do we need to make one?'
    ]
  }];

  save();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
load();
applyTheme(siteTheme);   // restore persisted theme immediately on page load
seedSample();
renderRead();
</script>
</body>
</html>
